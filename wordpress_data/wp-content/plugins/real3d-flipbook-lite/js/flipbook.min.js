var FLIPBOOK=FLIPBOOK||{};!function(e,t,o,i){e.fn.flipBook=function(e){return new FLIPBOOK.Main(e,this)},e.fn.swipeBook=function(e){return e.viewMode="swipe",new FLIPBOOK.Main(e,this)},e.fn.flipBook.options={name:"",pages:[],tableOfContent:[],tableOfContentCloseOnClick:!0,thumbsCloseOnClick:!0,thumbsStyle:"overlay",deeplinkingEnabled:!1,deeplinkingPrefix:"",assets:{preloader:"assets/images/preloader.jpg",flipMp3:"assets/mp3/turnPage.mp3",spinner:"assets/images/spinner.gif",backgroundMp3:"assets/mp3/background.mp3"},pdfUrl:null,pdfBrowserViewerIfMobile:!1,pdfBrowserViewerIfIE:!1,pdfBrowserViewerFullscreen:!0,pdfBrowserViewerFullscreenTarget:"_blank",rangeChunkSize:64,disableRange:!1,disableStream:!0,disableAutoFetch:!0,pdfAutoLinks:!1,htmlLayer:!0,rightToLeft:!1,startPage:0,sound:!0,backgroundColor:"rgb(81, 85, 88)",backgroundImage:"",backgroundPattern:"",backgroundTransparent:!1,thumbSize:150,loadAllPages:!1,loadPagesF:2,loadPagesB:1,autoplayOnStart:!1,autoplayInterval:3e3,autoplayLoop:!0,skin:"light",menuOverBook:!1,menuFloating:!1,menuBackground:"",menuShadow:"",menuMargin:0,menuPadding:0,menuTransparent:!1,menu2OverBook:!0,menu2Floating:!1,menu2Background:"",menu2Shadow:"",menu2Margin:0,menu2Padding:0,menu2Transparent:!0,skinColor:"",skinBackground:"",btnColor:"",btnBackground:"none",btnSize:18,btnRadius:2,btnMargin:2,btnPaddingV:10,btnPaddingH:10,btnShadow:"",btnTextShadow:"",btnBorder:"",btnColorHover:"",btnBackgroundHover:"",arrowColor:"#FFF",arrowColorHover:"#FFF",arrowBackground:"rgba(0, 0, 0, 0)",arrowBackgroundHover:"rgba(0, 0, 0, .15)",arrowSize:40,arrowRadius:4,arrowMargin:4,arrowPadding:10,arrowTextShadow:"0px 0px 1px rgba(0, 0, 0, 1)",arrowBorder:"",floatingBtnColor:"#EEE",floatingBtnColorHover:"",floatingBtnBackground:"#00000044",floatingBtnBackgroundHover:"",floatingBtnSize:null,floatingBtnRadius:null,floatingBtnMargin:null,floatingBtnPadding:null,floatingBtnShadow:"",floatingBtnTextShadow:"",floatingBtnBorder:"",btnOrder:["currentPage","btnFirst","btnPrev","btnNext","btnLast","btnZoomOut","btnZoomIn","btnThumbs","btnToc","btnShare","btnPrint","btnDownloadPdf","btnSound","btnTools","btnExpand","btnClose"],currentPage:{enabled:!0,title:"Current page",vAlign:"top",hAlign:"left",marginH:0,marginV:0,color:"",background:""},search:{enabled:!1},btnFirst:{enabled:!1,title:"First page",svg:"last",iconReverse:!0},btnPrev:{enabled:!0,title:"Previous page",svg:"next",iconReverse:!0},btnNext:{enabled:!0,title:"Next page"},btnLast:{enabled:!1,title:"Last page"},btnZoomIn:{enabled:!0,title:"Zoom in",svg:"plus"},btnZoomOut:{enabled:!0,title:"Zoom out",svg:"minus"},btnRotateLeft:{enabled:!1,title:"Rotate left"},btnRotateRight:{enabled:!1,title:"Rotate right"},btnAutoplay:{enabled:!0,title:"Autoplay",svg:"play",svgAlt:"pause"},btnSearch:{enabled:!1,title:"Search"},btnBookmark:{enabled:!0,title:"Bookmarks"},btnNotes:{enabled:!1,title:"Notes"},btnToc:{enabled:!0,title:"Table of Contents",svg:"list"},btnThumbs:{enabled:!0,title:"Pages"},btnShare:{enabled:!0,title:"Share"},btnPrint:{enabled:!0,title:"Print",toolsMenu:!0},btnDownloadPages:{enabled:!0,title:"Download",url:"images/pages.zip",name:"allPages.zip",svg:"download",toolsMenu:!0},btnDownloadPdf:{forceDownload:!1,enabled:!0,title:"View PDF",url:null,openInNewWindow:!0,name:"allPages.pdf",svg:"pdf",toolsMenu:!0},btnSound:{enabled:!0,title:"Sound",svgAlt:"mute",toolsMenu:!0},btnTools:{enabled:!0,title:"Tools"},btnExpand:{enabled:!0,title:"Toggle fullscreen",svgAlt:"compress"},btnClose:{title:"Close",hAlign:"right",vAlign:"top",size:20},sideNavigationButtons:!0,hideMenu:!1,shareUrl:null,shareTitle:null,shareImage:null,whatsapp:{enabled:!0,title:"WhatsApp"},twitter:{enabled:!0,title:"X (formerly Twitter)"},facebook:{enabled:!0,title:"Facebook"},pinterest:{enabled:!0,title:"Pinterest"},email:{enabled:!0,title:"Email"},linkedin:{enabled:!0,title:"LinkedIn"},digg:{enabled:!1,title:"Digg"},reddit:{enabled:!1,title:"Reddit"},pdf:{annotationLayer:!1},pageTextureSize:2048,pageTextureSizeSmall:1500,thumbTextureSize:300,pageTextureSizeMobile:1500,pageTextureSizeMobileSmall:1024,viewMode:"webgl",singlePageMode:!1,singlePageModeIfMobile:!1,zoomMin:.95,zoomMin2:.15,zoomMax2:null,zoomSize:null,zoomStep:2,zoomTime:300,zoomReset:!1,zoomResetTime:300,wheelDisabledNotFullscreen:!1,arrowsDisabledNotFullscreen:!1,arrowsAlwaysEnabledForNavigation:!0,responsiveView:!0,responsiveViewRatio:1,responsiveViewTreshold:768,responsiveContainer:!0,minPixelRatio:1,pageFlipDuration:1,contentOnStart:!1,thumbnailsOnStart:!1,searchOnStart:!1,sideMenuOverBook:!0,sideMenuOverMenu:!1,sideMenuOverMenu2:!0,sideMenuPosition:"left",lightBox:!1,lightBoxOpened:!1,lightBoxFullscreen:!1,lightboxCloseOnClick:!1,lightboxResetOnOpen:!0,lightboxBackground:null,lightboxBackgroundColor:null,lightboxBackgroundPattern:null,lightboxBackgroundImage:null,lightboxStartPage:null,lightboxMarginV:"0",lightboxMarginH:"0",lightboxCSS:"",lightboxPreload:!1,lightboxShowMenu:!1,lightboxCloseOnBack:!0,disableImageResize:!0,pan:0,panMax:10,panMax2:2,panMin:-10,panMin2:-2,tilt:0,tiltMax:0,tiltMax2:0,tiltMin:0,tiltMin2:-5,rotateCameraOnMouseMove:!1,rotateCameraOnMouseDrag:!0,lights:!0,lightColor:16777215,lightPositionX:0,lightPositionZ:1400,lightPositionY:350,lightIntensity:.6,shadows:!0,shadowMapSize:1024,shadowOpacity:.2,shadowDistance:0,pageRoughness:1,pageMetalness:0,pageHardness:2,coverHardness:2,pageSegmentsW:10,pageSegmentsH:1,pageMiddleShadowSize:2,pageMiddleShadowColorL:"#999999",pageMiddleShadowColorR:"#777777",antialias:!1,preloaderText:"",fillPreloader:{enabled:!1,imgEmpty:"images/logo_light.png",imgFull:"images/logo_dark.png"},logoImg:"",logoUrl:"",logoCSS:"position:absolute;",logoHideOnMobile:!1,printMenu:!0,downloadMenu:!0,cover:!0,backCover:!0,pdfTextLayer:!0,annotationLayer:!0,googleAnalyticsTrackingCode:null,minimumAndroidVersion:6,linkColor:"rgba(0, 0, 0, 0)",linkColorHover:"rgba(255, 255, 0, 1)",linkOpacity:.4,linkTarget:"_blank",rightClickEnabled:!0,pageNumberOffset:0,flipSound:!0,backgroundMusic:!1,doubleClickZoomDisabled:!1,pageDragDisabled:!1,pageClickAreaWdith:"10%",noteTypes:[{id:1,title:"User",color:"green",enabled:!0},{id:2,title:"Group",color:"yellow",enabled:!0},{id:3,title:"Admin",color:"blue",enabled:!0}],pageRangeStart:null,pageRangeEnd:null,previewMode:{},strings:{print:"Print",printLeftPage:"Print left page",printRightPage:"Print right page",printCurrentPage:"Print current page",printAllPages:"Print all pages",download:"Download",downloadLeftPage:"Download left page",downloadRightPage:"Download right page",downloadCurrentPage:"Download current page",downloadAllPages:"Download all pages",bookmarks:"Bookmarks",bookmarkLeftPage:"Bookmark left page",bookmarkRightPage:"Bookmark right page",bookmarkCurrentPage:"Bookmark current page",search:"Search",findInDocument:"Find in document",pagesFoundContaining:"pages found containing",noMatches:"No matches",matchesFound:"matches found",page:"Page",matches:"matches",thumbnails:"Thumbnails",tableOfContent:"Table of Contents",share:"Share",notes:"Notes",pressEscToClose:"Press ESC to close",password:"Password",addNote:"Add note",typeInYourNote:"Type in your note..."},mobile:{shadows:!1,pageSegmentsW:5,btnAutoplay:{toolsMenu:!0},btnBookmark:{toolsMenu:!0},btnZoomIn:{enabled:!1},btnZoomOut:{enabled:!1},btnFirst:{enabled:!1},btnLast:{enabled:!1},currentPage:{enabled:!1}}},FLIPBOOK.Main=function(e,n){var s=this;this.elem=n,this.$elem=jQuery(n),this.$body=jQuery("body"),this.body=this.$body[0],this.$window=jQuery(t),this.bodyHasVerticalScrollbar=function(){return s.body.scrollHeight>t.innerHeight},this.isZoomed=function(){return s.zoom>1},this.options={};var a,r=o.createElement("div").style,l=function(){for(var e="t,webkitT,MozT,msT,OT".split(","),t=0,o=e.length;t<o;t++)if(e[t]+"ransform"in r)return e[t].substr(0,e[t].length-1);return!1}(),h=/android/gi.test(navigator.appVersion),p=(a="perspective",(""===l?a:(a=a.charAt(0).toUpperCase()+a.substr(1),l+a))in r);this.isAndroid=h,this.has3d=p,void 0===FLIPBOOK.hasWebGl&&(FLIPBOOK.hasWebGl=function(){const e=o.createElement("canvas");return(e.getContext("webgl")||e.getContext("experimental-webgl"))instanceof WebGLRenderingContext}()),this.hasWebGl=FLIPBOOK.hasWebGl,this.thumbsShowing=!1,this.bookmarkShowing=!1,this.searchingString=!1,this.tocShowing=!1,this.menuShowing=!0,this.fullscreenActive=!1;var d={2:{currentPage:{vAlign:"bottom",hAlign:"center"},btnAutoplay:{hAlign:"right",vAlign:"top"},btnSound:{hAlign:"left",vAlign:"top"},btnExpand:{hAlign:"right",vAlign:"top"},btnSearch:{hAlign:"left",vAlign:"top"},btnBookmark:{hAlign:"left",vAlign:"top"},btnToc:{hAlign:"left",vAlign:"top"},btnThumbs:{hAlign:"left",vAlign:"top"},btnShare:{hAlign:"right",vAlign:"top"},btnPrint:{hAlign:"right",vAlign:"top"},btnDownloadPages:{hAlign:"right",vAlign:"top"},btnDownloadPdf:{hAlign:"right",vAlign:"top"},btnTools:{hAlign:"right",vAlign:"top"},menuTransparent:!0},3:{menuTransparent:!0,menu2Transparent:!1,menu2OverBook:!1,menu2Padding:5,btnMargin:5,currentPage:{vAlign:"top",hAlign:"center"},btnPrint:{vAlign:"top",hAlign:"right"},btnDownloadPdf:{vAlign:"top",hAlign:"right"},btnDownloadPages:{vAlign:"top",hAlign:"right"},btnThumbs:{vAlign:"top",hAlign:"left"},btnToc:{vAlign:"top",hAlign:"left"},btnBookmark:{vAlign:"top",hAlign:"left"},btnSearch:{vAlign:"top",hAlign:"left"},btnShare:{vAlign:"top",hAlign:"right"},btnAutoplay:{vAlign:"top",hAlign:"right"},btnExpand:{vAlign:"top",hAlign:"right"},btnZoomIn:{hAlign:"right"},btnZoomOut:{hAlign:"right"},btnSound:{vAlign:"top",hAlign:"right"},btnTools:{vAlign:"top",hAlign:"right"},menuPadding:5},4:{menu2Transparent:!1,menu2OverBook:!1,sideMenuOverMenu2:!1,currentPage:{vAlign:"top",hAlign:"center"},btnAutoplay:{vAlign:"top",hAlign:"left"},btnSound:{vAlign:"top",hAlign:"left"},btnExpand:{vAlign:"top",hAlign:"right"},btnZoomIn:{vAlign:"top"},btnZoomOut:{vAlign:"top"},btnSearch:{vAlign:"top",hAlign:"left"},btnBookmark:{vAlign:"top",hAlign:"left"},btnToc:{vAlign:"top",hAlign:"left"},btnThumbs:{vAlign:"top",hAlign:"left"},btnShare:{vAlign:"top",hAlign:"right"},btnPrint:{vAlign:"top",hAlign:"right"},btnDownloadPages:{vAlign:"top",hAlign:"right"},btnDownloadPdf:{vAlign:"top",hAlign:"right"},btnTools:{vAlign:"top",hAlign:"right"}}},c={dark:{skinColor:"#EEE",btnColorHover:"#FFF",skinBackground:"#313538"},light:{skinColor:"#222",btnColorHover:"#000",skinBackground:"#FFF",floatingBtnColor:"#FFF",floatingBtnBackground:"#00000055"},gradient:{skinColor:"#EEE",btnColor:"#EEE",btnColorHover:"#FFF",skinBackground:"#313538DD",menuOverBook:!0,menu2OverBook:!0,sideMenuOverMenu:!0,sideMenuOverMenu2:!0,menuBackground:"linear-gradient(to top, rgba(0, 0, 0, 0.65) 0%, transparent 100%)",menu2Background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.65) 0%, transparent 100%)"}};for(var g in c)e.skin==g&&(e=jQuery.extend(!0,{},c[g],e));for(var g in d)Number(e.layout)===Number(g)&&(e=jQuery.extend(!0,{},d[g],e));this.options=jQuery.extend(!0,{},jQuery.fn.flipBook.options,e);var u=this.options,b=t;if(this.uniqueID=Date.now(),u.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),u.isMobile&&jQuery.extend(!0,u,u.mobile),this.strings=u.strings,u.pageShininess=u.pageShininess/2,this.s=0,u.i=b!==parent,u.googleAnalyticsTrackingCode)if(this.gaCode=u.googleAnalyticsTrackingCode,this.gaCode.includes("UA-"))t.ga||function(e,t,o,i,n,s,a){e.GoogleAnalyticsObject=n,e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=1*new Date,s=t.createElement(o),a=t.getElementsByTagName(o)[0],s.async=1,s.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(s,a)}(t,o,"script",0,"ga"),ga("create",this.gaCode,"auto");else if(this.gaCode.includes("G-")||this.gaCode.includes("AW-")){var m=o.createElement("script");m.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+this.gaCode);const e=this;m.async=1,m.onload=function(){function o(){dataLayer.push(arguments)}t.dataLayer=t.dataLayer||[],o("js",new Date),o("config",e.gaCode)},o.body.appendChild(m)}u.isMobile&&(u.singlePageMode=!!u.singlePageModeIfMobile||u.singlePageMode,u.viewModeMobile&&(u.viewMode=u.viewModeMobile),u.pageTextureSizeMobile&&(u.pageTextureSize=u.pageTextureSizeMobile),u.pageTextureSizeMobileSmall&&(u.pageTextureSizeSmall=u.pageTextureSizeMobileSmall));var f,v,k=5,w=7,P=2;async function x(){if(!s.disposed){var e=t.location.hash,o=s.getPageFromHash();u.cover||o++;var i=o;o<1?o=1:s.numPages&&o>s.numPages&&(o=s.numPages),o&&(o=u.rightToLeft&&u.pages&&u.pages.length?u.pages.length-o+1:o,s.started?s.Book&&(s.lightbox&&!FLIPBOOK.lightboxOpened&&(s.lightbox.openLightbox(),await s.lightboxStart()),s.goToPage(o,-1==e.indexOf("flip"))):(u.startPage=i,u.lightBox&&(S(),u.lightBoxFullscreen&&setTimeout((function(){s.toggleExpand()}),100))))}}function S(){if(!s.initStarted)if(s.initStarted=!0,u.fillPreloader.enabled){s.$fillPreloader=jQuery("<div>").addClass("flipbook-fillPreloader");var e=new Image;e.src=u.fillPreloader.imgEmpty,e.onload=function(){var t=new Image;t.src=u.fillPreloader.imgFull,t.onload=function(){jQuery(e).appendTo(s.$fillPreloader),s.$fillPreloaderImg=jQuery(t).appendTo(s.$fillPreloader),s.$fillPreloader.appendTo(s.wrapper),y()}}}else y()}function y(){s.initialized||(s.id=Date.now(),s.addPageItems(),u.pdfMode?s.initPdf():s.initJpg(),s.setLoadingProgress(.1),s.initialized=!0)}u.pageTextureSize=Math.pow(k*w-1,P),u.pageTextureSizeSmall=Math.pow(k*w-1,P),u.zoomSize=Math.pow(w*k+k,P),"3dSinglePage"==u.viewMode&&(u.singlePageMode=!0),"2dSinglePage"==u.viewMode&&(u.singlePageMode=!0,u.viewMode="2d"),u.singlePageMode&&("2d"!=u.viewMode&&"swipe"!=u.viewMode&&(u.viewMode="3d"),u.rightToLeft&&(u.viewMode="swipe"),u.cover=!0),u.singlePageMode&&"3d"==u.viewMode&&(u.rightToLeft=!1),"simple"==u.viewMode&&(u.viewMode="3d",u.instantFlip=!0),u.cover||(u.responsiveView=!1),u.sideMenuPosition=u.rightToLeft?"right":"left","webgl"==u.viewMode&&(!this.hasWebGl||parseFloat(!!(v=(f=(f||navigator.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/))&&v[1])<u.minimumAndroidVersion&&this.isAndroid)&&(u.viewMode="3d"),"3d"!=u.viewMode||s.has3d||(u.viewMode="2d"),this.webgl="webgl"==u.viewMode,u.menuFloating&&(u.menuOverBook=!0,u.sideMenuOverMenu=!0),u.menu2Floating&&(u.menu2OverBook=!0,u.sideMenuOverMenu2=!0),u.menuTransparent&&(u.menuOverBook=!0,u.sideMenuOverMenu=!0,u.menuBackground="none"),u.menu2Transparent?(u.menu2OverBook=!0,u.sideMenuOverMenu2=!0,u.menu2Background="none"):u.sideMenuOverMenu2=!1,u.menuOverBook&&(u.sideMenuOverMenu=!0),u.menu2OverBook&&(u.sideMenuOverMenu2=!0),u.pdfMode=Boolean(u.pdfUrl&&""!=u.pdfUrl)||u.pdfBase64,u.backgroundTransparent&&(u.backgroundColor="none"),this.options.containerRatio=function(e){if(e!==i){if("number"==typeof e)return e;if((e=String(e).trim().replace("/",":")).includes(":")){const t=e.split(":");return parseFloat(t[0])/parseFloat(t[1])}return parseFloat(e)}}(this.options.containerRatio),this.wrapper=jQuery(o.createElement("div")).addClass("flipbook-main-wrapper"),""!=u.backgroundColor&&this.wrapper.css("background",u.backgroundColor),""!=u.backgroundPattern&&this.wrapper.css("background","url("+u.backgroundPattern+") repeat"),""!=u.backgroundImage&&(this.wrapper.css("background","url("+u.backgroundImage+") no-repeat"),this.wrapper.css("background-size","cover"),this.wrapper.css("background-position","center center")),this.bookLayer=jQuery(o.createElement("div")).addClass("flipbook-bookLayer").appendTo(s.wrapper),u.rightClickEnabled||this.bookLayer.bind("contextmenu",(function(e){return!1})),u.hideMenu&&(this.bookLayer.css("bottom","0"),u.menuOverBook=!0),u.pagesOriginal=JSON.parse(JSON.stringify(u.pages)),this.book=jQuery(o.createElement("div")).addClass("book").appendTo(s.bookLayer),u.preloader?this.preloader=jQuery(u.preloader):this.preloader=jQuery('<div class="flipbook-preloader cssload-container"><div class="cssload-speeding-wheel"></div><div class="flipbook-loading-text">'+u.preloaderText+'</div><div class="flipbook-loading-bg"></div></div>'),this.setLoadingProgress(0),this.dispose=function(){this.disposed=!0},u.main=this,this._events={},this.on=function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},this.off=function(e,t){if(this._events[e]){var o=this._events[e].indexOf(t);o>-1&&this._events[e].splice(o,1)}},this.trigger=function(e){if(this._events[e]){var t=0,o=this._events[e].length;if(o)for(;t<o;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},this.on("textlayerrendered",(function(e){s.searchingString&&s.mark(s.searchingString,!0)})),this.on("pageLoaded",(function(e){u.pages[e.index]=u.pages[e.index]||{},u.pages[e.index].canvas=u.pages[e.index].canvas||{},u.pages[e.index].images=u.pages[e.index].images||{},u.pages[e.index].images[e.size]=e.images,s.searchingString&&s.mark(s.searchingString,!0)})),this.addPageNotes=function(e){this.noteService&&this.noteService.initPageNotes(e)},this.on("pdfinit",(function(){u.tableOfContent=s.pdfService.outline||u.tableOfContent,u.doublePage=s.pdfService.double,u.doublePage||(u.backCover=s.pdfService.numPages%2==0,u.cover||(u.backCover=!u.backCover)),s.viewportOriginal=s.pdfService.viewports[0],u.firstPage={width:s.pdfService.viewports[0].width,height:s.pdfService.viewports[0].height,ratio:s.pdfService.viewports[0].width/s.pdfService.viewports[0].height},s.pdfService.numPages>1&&(u.secondPage={width:s.pdfService.viewports[1].width,height:s.pdfService.viewports[1].height,ratio:s.pdfService.viewports[1].width/s.pdfService.viewports[1].height}),u.numPages=s.pdfService.numPages,u.previewPages&&(u.numPages=u.previewPages),1==u.numPages&&(u.viewMode="swipe",u.singlePageMode=!0,u.btnNext.enabled=!1,u.btnPrev.enabled=!1,u.btnFirst.enabled=!1,u.btnLast.enabled=!1,u.sideNavigationButtons=!1,u.btnAutoplay.enabled=!1,u.printMenu=!1,u.downloadMenu=!1,s.webgl=!1,u.rightToLeft=!1);for(var e=[],t=u.pageTextureSize,o=0;o<u.numPages;o++){var i={canvas:{}};u.pages&&u.pages[o]&&jQuery.extend(i,u.pages[o]),e[o]=i}u.pages=e,u.pageWidth=parseInt(t*s.viewportOriginal.width/s.viewportOriginal.height),u.pageHeight=t,u.pw=u.pageWidth,u.ph=u.pageHeight,u.zoomSize=u.zoomSize||u.pageTextureSize,s.start()})),FLIPBOOK.flipbookSrc=FLIPBOOK.flipbookSrc||this.options.flipbookSrc||function(){for(var e=o.getElementsByTagName("script"),t=0;t<e.length;t++){var i=String(e[t].src);if(i.match("flipbook\\.js")||i.match("flipbook\\.min\\.js"))return i;if(i.match("flipbook\\.lite\\.js")||i.match("flipbook\\.lite\\.min\\.js"))return i.replace(".lite","")}return""}();const M=FLIPBOOK.flipbookSrc.includes("flipbook.min.js"),B=M?"flipbook.min.js":"flipbook.js",T=M?".min":"";if([{key:"iscrollSrc",value:"libs/iscroll"},{key:"threejsSrc",value:"libs/three"},{key:"flipbookWebGlSrc",value:"flipbook.webgl"},{key:"flipbookBook3Src",value:"flipbook.book3"},{key:"flipBookSwipeSrc",value:"flipbook.swipe"},{key:"flipBookScrollSrc",value:"flipbook.scroll"},{key:"pdfjsSrc",value:"libs/pdf"},{key:"pdfServiceSrc",value:"flipbook.pdfservice"},{key:"pdfjsworkerSrc",value:"libs/pdf.worker"},{key:"markSrc",value:"libs/mark"}].forEach((e=>{FLIPBOOK[e.key]=FLIPBOOK.flipbookSrc.replace(B,e.value+T+".js")})),!u.deeplinkingPrefix&&u.deeplinking&&u.deeplinking.prefix&&(u.deeplinkingPrefix=u.deeplinking.prefix),u.deeplinkingEnabled=u.deeplinkingPrefix||u.deeplinkingEnabled||u.deeplinking&&u.deeplinking.enabled,u.deeplinkingEnabled&&(x(),t.addEventListener("hashchange",x)),u.lightBox)u.btnClose.enabled=!0,this.lightbox=new FLIPBOOK.Lightbox(this,this.wrapper,u),this.lightboxStartedTimes=0,this.wrapper.css("background","none"),this.bookLayer.css("background","none"),this.book.css("background","none"),this.preloader.appendTo(this.lightbox.overlay).css("position","fixed"),this.$elem.css("cursor","pointer").bind("click",(async function(e){s.disposed||(e.preventDefault(),s.lightboxStartPage=jQuery(this).attr("data-page"),s.started?(await s.lightboxStart(),u.lightBoxFullscreen&&setTimeout((async function(){s.toggleExpand()}),0),s.lightbox.openLightbox()):(S(),s.lightbox.openLightbox(),u.lightBoxFullscreen&&setTimeout((async function(){s.toggleExpand()}),100)))})),u.lightBoxOpened?(S(),jQuery(t).trigger("r3d-lightboxloadingstarted")):u.lightboxPreload&&async function(){var e=[];u.pdfMode&&(void 0===FLIPBOOK.PdfService&&e.push(s.loadScript(FLIPBOOK.pdfServiceSrc)),"undefined"==typeof pdfjsLib&&e.push(s.loadScript(FLIPBOOK.pdfjsSrc)),void 0===FLIPBOOK.PdfService&&e.push(s.loadScript(FLIPBOOK.pdfServiceSrc)),(u.btnSearch.enabled||u.btnNotes.enabled||u.search.enabled)&&e.push(s.loadScript(FLIPBOOK.markSrc))),"webgl"==u.viewMode?"undefined"==typeof THREE&&await s.loadScript(FLIPBOOK.threejsSrc):"undefined"==typeof IScroll&&e.push(s.loadScript(FLIPBOOK.iscrollSrc)),await Promise.all(e)}(),this.fullscreenElement=o.documentElement;else{u.btnClose.enabled=!1,this.preloader.appendTo(this.wrapper),this.wrapper.appendTo(this.$elem),this.fullscreenElement=this.$elem[0];new IntersectionObserver((e=>{e[0].isIntersecting?s.Book?s.Book.enable():S():s.Book&&s.Book.disable()})).observe(this.wrapper[0])}},FLIPBOOK.Main.prototype={start:async function(){if(this.options.dp&&(this.options.doublePage=!0),this.started)return;this.pageW=this.options.pageWidth,this.bookW=2*this.options.pageWidth,this.options.singlePageMode&&(this.bookW/=2),this.pageH=this.options.pageHeight,this.bookH=this.options.pageHeight,this.options.numPages%2==0?this.options.numSheets=(this.options.numPages+2)/2:this.options.numSheets=(this.options.numPages+1)/2,this.started=!0,this.options.lightBox&&(this.lightbox.openLightbox(),await this.lightboxStart());const e=this.options.pageClickAreaWdith,t=this.options.pages.length,o=this.options.doublePage,i=this.options.singlePageMode,n="scroll"==this.options.viewMode,s=1e3*this.options.pageWidth/this.options.pageHeight,a=s-50,r=2*s-50;this.options.pages.hasHtmlContent=!!this.options.pages&&this.options.pages.some((e=>!!e.htmlContent));var l=this.options.rightToLeft,h=this;function p(e){e.htmlContent+='<a href="#" draggable="false" class="internalLink pageClickArea pageClickAreaLeft" data-page="prev"></a>'}function d(e,t){const o=t?r:a;e.htmlContent+='<a href="#" draggable="false" class="internalLink pageClickArea pageClickAreaRight" data-page="next" style="left:'+o+'px;"></a>'}e&&!n&&this.options.pages.forEach((function(e,n){e.htmlContent||="",i?(n>0&&(l?p(e):d(e)),n<t-1&&(l?d(e):p(e))):o?h.options.cover&&0==n||h.options.backCover&&n==h.options.pages.length-1?l?p(e):d(e):(p(e),d(e,!0)):n%2==0?l?p(e):d(e):l?d(e):p(e)})),await this.createBook(),this.createTooltip(),this.options.btnNotes.enabled&&this.initNotes(),this.updateSkinColors()},updateSkinColors:function(){var e=this.options;e.skinColor&&this.wrapper.find(".skin-color").css("color",e.skinColor),e.skinBackground&&this.wrapper.find(".skin-color-bg").css("background",e.skinBackground)},lightboxStart:async function(){var e=this;this.started||await this.start(),void 0!==this.Book?(this.Book.enable(),this.backgroundMusic&&this.backgroundMusic.pause(),this.lightboxStartPage?this.goToPage(this.lightboxStartPage,!0):this.options.lightboxStartPage&&this.goToPage(this.options.lightboxStartPage,!0),this.lightboxStartedTimes++,this.sendGAEvent({event:"flipbook_lightbox_open",book_name:this.options.name,nonInteraction:!0}),this.updateCurrentPage(),this.initColors(),this.resize(),this.lightbox.openLightbox()):setTimeout((function(){e.lightboxStart()}),100)},setHash:function(e){e<1&&(e=1),"#"+this.options.deeplinkingPrefix+e!=t.location.hash&&this.options.deeplinkingEnabled&&this.Book.enabled&&this.hash!=e&&(t.location.hash="#"+this.options.deeplinkingPrefix+String(e),this.hash=e)},clearHash:function(){},getPageFromHash:function(){},sendGAEvent:function(e){},initColors:function(){this.wrapper.find(".skin-color-bg").removeClass("flipbook-bg-light").removeClass("flipbook-bg-dark").addClass("flipbook-bg-"+this.options.skin),this.wrapper.find(".skin-color").removeClass("flipbook-color-light").removeClass("flipbook-color-dark").addClass("flipbook-color-"+this.options.skin),this.updateSkinColors()},lightboxEnd:function(){o.fullscreenElement&&this.toggleExpand(),t.location.hash&&this.clearHash(),this.setLoadingProgress(1),this.Book&&this.Book.disable(),this.pauseMediaPlayback(),this.backgroundMusic&&this.backgroundMusic.pause()},pauseMediaPlayback:function(){this.wrapper[0].querySelectorAll(".flipbook-page-item").forEach((function(e){"VIDEO"!=e.nodeName&&"AUDIO"!=e.nodeName||e.pause()})),this.pageAudioPlayer&&this.pageAudioPlayer.pause()},turnPageStart:function(){this.playFlipSound(),this.pauseMediaPlayback()},turnPageComplete:function(){this.animating=!1,this.updateCurrentPage();var e=this.Book.rightIndex||0;this.options.rightToLeft&&(e=this.options.pages.length-e),this.trigger("turnpagecomplete",{rightIndex:e}),this.options.zoomReset&&this.Book.zoomTo(this.options.zoomMin)},updateCurrentPage:function(){var e,i=this.options.rightToLeft,n=this.options.numPages,s=n-this.options.pageNumberOffset,a=this.Book.rightIndex||0;a%2==1&&a++,i&&(a=this.options.pages.length-a);let r=this.options.cover?a:a-1;if(this.options.singlePageMode||this.Book.singlePage||1==this.Book.view?(this.Book.getCurrentPageNumber?e=this.Book.getCurrentPageNumber():(i&&a--,e=a+1),this.setHash(e),this.cPage=[e-1]):(r>n||r==n&&n%2==0?(e=n,this.cPage=[n-1]):r<1?(e=1,this.cPage=[0]):(e=String(r)+"-"+String(r+1),this.cPage=[r-1,r]),this.setHash(r)),i?(this.enableNext(r>0),this.enablePrev(this.Book.canFlipPrev()||a<n-1)):(this.enablePrev(r>0),this.enableNext(this.Book.canFlipNext()||a<n-1)),2==this.cPage.length?(this.wrapper.find(".c-l-p").show(),this.wrapper.find(".c-r-p").show(),this.wrapper.find(".c-p").hide()):(this.wrapper.find(".c-l-p").hide(),this.wrapper.find(".c-r-p").hide(),this.wrapper.find(".c-p").show()),void 0!==this.currentPage&&(this.s&&this.options.pdfPageScale>0&&this.goToPage(0),e!=this.currentPageValue)){this.currentPageValue=String(e);var l=Number(String(e).split("-")[0]),h=Number(String(e).split("-")[1]);l&&this.options.pages[Number(l-1)]&&this.options.pages[Number(l-1)].name&&(l=this.options.pages[Number(l-1)].name),h&&this.options.pages[Number(h-1)]&&this.options.pages[Number(h-1)].name&&(h=this.options.pages[Number(h-1)].name),e=l&&h?l+"-"+h:l||(h||1),this.currentPageString=e,this.currentPageInput.trigger("blur"),this.currentPage.text(" / "+String(s));const i=o.createElement("span");i.style.visibility="hidden",i.style.position="absolute",i.style.whiteSpace="pre",i.className="flipbook-currentPageInput",o.body.appendChild(i),i.textContent=e,this.currentPageInput[0].style.width=`${i.offsetWidth+2}px`,o.body.removeChild(i),this.resize(),jQuery(this).trigger({type:"pagechange",page:this.currentPageValue,name:this.options.name}),jQuery(t).trigger({type:"r3d-pagechange",page:this.currentPageValue,name:this.options.name}),this.sendGAEvent({event:"flipbook_page_view",book_name:this.options.name,page_number:this.currentPageValue,nonInteraction:!0}),this.flippingPage=!1}},initJpg:function(){var e=this;if(this.options.previewPages&&(this.options.pages=this.options.pages.splice(0,this.options.previewPages)),this.options.pageRangeStart||this.options.pageRangeEnd){const e=this.options.pageRangeStart||1,t=this.options.pageRangeEnd||this.options.pages.length;this.options.pages=this.options.pages.splice(e-1,t-e+1)}var t=0,o=1;this.options.cover||(t=1,o=2),this.loadPage(t,this.options.pageTextureSize,(function(){e.setLoadingProgress(.5);var t=e.options;if(1==t.pages.length){t.numPages=1;var i=t.pages[0].img;t.pw=i.width,t.ph=i.height,t.pageWidth=i.width,t.pageHeight=i.height,t.pageMode="singlePage",t.doublePage=!1,t.zoomSize=t.zoomSize||i.height,e.setLoadingProgress(.7),t.btnNext.enabled=!1,t.btnPrev.enabled=!1,t.btnFirst.enabled=!1,t.btnLast.enabled=!1,t.sideNavigationButtons=!1,t.btnAutoplay.enabled=!1,t.singlePageMode=!0,t.rightToLeft=!1,e.start()}else e.loadPage(o,t.pageTextureSize,(function(){var o=t.pages[0].width||t.pages[0].img.width,i=t.pages[0].height||t.pages[0].img.height,n=o/i,s=(t.pages[1].width||t.pages[1].img.width)/(t.pages[1].height||t.pages[1].img.height);t.pw=o,t.ph=i,t.pageWidth=o,t.pageHeight=i,t.doublePage=s/n>1.5,t.doublePage||(t.backCover=t.pages.length%2==0,t.cover||(t.backCover=!t.backCover)),t.zoomSize=t.zoomSize||i,e.setLoadingProgress(.7),e.start()}))}))},initPdf:async function(){var e=[];if(!this.started){var o=this;"undefined"==typeof pdfjsLib&&e.push(o.loadScript(FLIPBOOK.pdfjsSrc)),this.setLoadingProgress(.2),void 0===FLIPBOOK.PdfService&&e.push(o.loadScript(FLIPBOOK.pdfServiceSrc)),await Promise.all(e),this.setLoadingProgress(.3),t.CanvasPixelArray&&(t.CanvasPixelArray.prototype.set=function(e){for(var t=this.length,o=0;o<t;o++)this[o]=e[o]}),pdfjsLib.GlobalWorkerOptions.workerSrc=this.options.pdfjsworkerSrc||FLIPBOOK.pdfjsworkerSrc,o.pdfService=new FLIPBOOK.PdfService(o,o.options)}},initPageHTML:function(e){const t=this.options.pages[e];t.htmlInitialized||(this.addPageLinks(t),this.addPageNotes(t),t.htmlInitialized=!0)},addPageLinks:function(e){var t=this;const o=e.htmlContent.jquery?e.htmlContent[0]:e.htmlContent;this.pageAudioPlayer=new Audio;var i=o.querySelectorAll("a");i.forEach((function(e){const o=e.classList.contains("internalLink"),n=e.classList.contains("spotlight");o?e.dataset.page&&e.addEventListener("click",(function(o){if(o.preventDefault(),"prev"==e.dataset.page)t.prevPage();else if("next"==e.dataset.page)t.nextPage();else{let o=Number(e.dataset.page);t.options.doublePage&&(o=2*o-1),t.options.rightToLeft&&(o=t.options.pages.length-o+1),t.goToPage(o)}})):n?e.dataset.url&&(e.style.cursor="pointer",e.addEventListener("click",(function(e){e.preventDefault(),t.spotlight(this.dataset.url,this.dataset.title,this.dataset.description)}))):(e.addEventListener("click",(function(o){t.sendGAEvent({event:"flipbook_page_link_click",book_name:t.options.name,page_number:t.currentPageValue,url:this.href,nonInteraction:!0}),e.href.endsWith(".mp3")&&(o.preventDefault(),t.pageAudioPlayer.paused||(t.pageAudioPlayer.pause(),t.pageAudioPlayer.currentTime=0),t.pageAudioPlayer.src=o.target.href,t.pageAudioPlayer.play())})),e.addEventListener("mouseover",(function(e){const t=this;i.forEach((function(e){e.href==t.href&&"#"!=e.href&&e.classList.add("flipbook-page-auto-link-hover")}))})),e.addEventListener("mouseout",(function(e){i.forEach((function(e){e.classList.remove("flipbook-page-auto-link-hover")}))})))})),o.querySelectorAll(".flipbook-page-item-video").forEach((function(e){e.addEventListener("play",(function(){t.sendGAEvent({event:"flipbook_page_video_play",book_name:t.options.name,page_number:t.currentPageValue,url:this.getElementsByTagName("source")[0].src,nonInteraction:!0})}))}))},addPageNames:function(){const e=this.options.pageNumberOffset;this.options.pages.forEach((function(t,o){void 0===t.name&&(t.name=o-e+1,t.name<1&&(t.name=function(e){let t="";return[{value:1e3,numeral:"M"},{value:900,numeral:"CM"},{value:500,numeral:"D"},{value:400,numeral:"CD"},{value:100,numeral:"C"},{value:90,numeral:"XC"},{value:50,numeral:"L"},{value:40,numeral:"XL"},{value:10,numeral:"X"},{value:9,numeral:"IX"},{value:5,numeral:"V"},{value:4,numeral:"IV"},{value:1,numeral:"I"}].forEach((function(o){for(;e>=o.value;)t+=o.numeral,e-=o.value})),t}(o+1)))}))},loadPageHTML:async function(e,t){var o=this.options;this.options.cover||e--,this.options.pdfMode?this.options.pages[e]?(this.initPageHTML(e),t.call(this,o.pages[e].htmlContent,e)):t.call(this,{}):(this.initPageHTML(e),t.call(this,o.pages[e].htmlContent,e))},loadPageJSON:async function(e){const t=this.options.pages[e]||{};if(!1!==this.options.matchProtocol){const e=location.protocol;t.json=t.json.replace(/^http:/,e),t.json=t.json.replace(/^https:/,e)}return t.jsonLoadingPromise||(t.jsonLoadingPromise=(async()=>{try{const e=await fetch(t.json);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error loading JSON:",e),e}finally{t.jsonLoadingPromise=null}})()),t.jsonLoadingPromise},fetchAndCacheImage:function(e){if(this.imageCache=this.imageCache||{},!this.imageCache[e]){const t=fetch(e).then((e=>e.blob())).then((e=>createImageBitmap(e,{imageOrientation:"flipY"})));this.imageCache[e]=t}return this.imageCache[e]},loadPage:function(e,t,i){this.options.cover||e--;var n=this,s=this.options.pages&&this.options.pages[e]&&this.options.pages[e].src,a=this.options.pages[e];if(a)if(this.options.pdfMode&&!s)this.loadPageFromPdf(e,t,i);else if(t==this.options.thumbTextureSize&&a.thumb)if(a.thumbImg)a.thumbLoaded?n.pageLoaded({index:e,size:t,image:a.thumb},i):setTimeout((function(){n.loadPage(e,t,i)}),300);else{if(a.thumbImg=o.createElement("img"),a.thumbImg.setAttribute("data-id",e),a.thumbImg.onload=function(){a.thumbLoaded=!0,n.pageLoaded({index:e,size:t,image:a.thumbImg},i)},"webgl"==this.options.viewMode&&(a.thumbImg.crossOrigin="Anonymous"),!1!==n.options.matchProtocol){const e=location.protocol;a.thumb.startsWith(e)||(a.thumb=a.thumb.replace(/^https?:/,e))}a.thumbImg.src=a.thumb}else if(a.img)a.imgLoaded?n.pageLoaded({index:e,size:t,image:a.img},i):setTimeout((function(){n.loadPage(e,t,i)}),300);else{if(!1!==n.options.matchProtocol){const e=location.protocol;a.src.startsWith(e)||(a.src=a.src.replace(/^https?:/,e))}"webgl"==n.options.viewMode?n.fetchAndCacheImage(a.src).then((o=>{a.imgLoaded=!0,a.width=o.width,a.height=o.height,n.pageLoaded({index:e,size:t,imageBitmap:o},i)})):(a.img=o.createElement("img"),a.img.setAttribute("data-id",e),a.img.onload=function(){a.imgLoaded=!0,n.pageLoaded({index:e,size:t,image:a.img},i)},a.img.src=a.src)}else i.call(this)},pageLoaded:function(e,t){t.call(this,e,t),this.options.loadAllPages&&e.index<this.options.numPages-1&&this.loadPage(e.index+1,e.size,(function(){})),this.searchingString&&this.mark(this.searchingString,!0)},loadPageFromPdf:function(e,t,o){t=t||this.options.pageTextureSize,this.pdfService.renderBookPage(e,t,o)},getString:function(e){return this.options.strings[e]},mark:function(e,t){(e!=this.markedStr||t)&&(this.markedStr=e,this.options.pages.forEach((function(t){var o=jQuery(t.htmlContent).find(".textLayer");if(t.marked!=e&&o.length){t.marked=e;var i=new Mark(o[0]);i.unmark({className:"mark-search",done:function(){i.mark(e,{acrossElements:!0,separateWordSearch:!1,className:"mark-blue mark-search"})}})}})))},unmark:function(){this.searchingString=null,this.markedStr=null,this.options.pages.forEach((function(e){if(e.marked){e.marked=null;var t=jQuery(e.htmlContent);new Mark(t[0]).unmark({className:"mark-search"})}}))},toggleSound:function(){var e=this.options;e.sound=!e.sound,this.backgroundMusic&&(e.sound?this.backgroundMusic.play():this.backgroundMusic.pause()),this.toggleIcon(this.btnSound,e.sound)},toggleIcon:function(e,t){if(e.$iconAlt)t?(e.$iconAlt.hide(),e.$icon.show()):(e.$iconAlt.show(),e.$icon.hide());else{var o=t?e.iconAlt:e.icon,i=t?e.icon:e.iconAlt;e.find("."+o).removeClass(o).addClass(i)}},scrollPageIntoView:function(e){let t=e.pageNumber;this.options.doublePage&&(t=2*t-1),this.options.rightToLeft&&(t=this.options.pages.length-t+1),this.goToPage(t)},loadScript:function(e){return new Promise((function(t,n){if(FLIPBOOK.scripts=FLIPBOOK.scripts||{},FLIPBOOK.scripts[e])FLIPBOOK.scripts[e].loaded?t():FLIPBOOK.scripts[e].promises.push({resolve:t,reject:n});else{FLIPBOOK.scripts[e]={loaded:!1,promises:[{resolve:t,reject:n}]};var s=o.createElement("script"),a=o.getElementsByTagName("script")[0];s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(t,o){(o||!s.readyState||/loaded|complete/.test(s.readyState))&&(s.onload=s.onreadystatechange=null,s=i,o||(FLIPBOOK.scripts[e].loaded=!0,FLIPBOOK.scripts[e].promises.forEach((e=>e.resolve()))))},s.onerror=function(t){FLIPBOOK.scripts[e].promises.forEach((e=>e.reject(t))),FLIPBOOK.scripts[e]=i},a.parentNode.insertBefore(s,a)}}))},createBook:async function(){var e=this,t=this.options;if(this.options.searchOnStart&&(this.options.btnSearch.enabled=!0),(this.options.btnSearch.enabled||this.options.btnNotes.enabled||this.options.search.enabled)&&await this.loadScript(FLIPBOOK.markSrc),this.setLoadingProgress(.9),"webgl"===this.options.viewMode?("undefined"==typeof THREE&&await this.loadScript(FLIPBOOK.threejsSrc),void 0===FLIPBOOK.BookWebGL&&await this.loadScript(FLIPBOOK.flipbookWebGlSrc)):"swipe"===this.options.viewMode?("undefined"==typeof IScroll&&await this.loadScript(FLIPBOOK.iscrollSrc),void 0===FLIPBOOK.BookSwipe&&await this.loadScript(FLIPBOOK.flipBookSwipeSrc)):"scroll"===this.options.viewMode?("undefined"==typeof IScroll&&await this.loadScript(FLIPBOOK.iscrollSrc),void 0===FLIPBOOK.BookScroll&&await this.loadScript(FLIPBOOK.flipBookScrollSrc)):("undefined"==typeof IScroll&&await this.loadScript(FLIPBOOK.iscrollSrc),void 0===FLIPBOOK.Book3&&await this.loadScript(FLIPBOOK.flipbookBook3Src)),this.setLoadingProgress(1),this.initEasing(),this.options.doublePage&&this.options.pages.length>2){var i,n,s=this.options.pages[0];s.title=1;for(var a=[s],r=1;r<=this.options.pages.length-2;r++)i={src:(s=this.options.pages[r]).src,thumb:s.thumb,title:2*r,htmlContent:s.htmlContent,json:s.json,side:"left"},n={src:s.src,thumb:s.thumb,title:2*r+1,htmlContent:s.htmlContent,json:s.json,side:"right"},a.push(i),a.push(n);(s=this.options.pages[this.options.pages.length-1]).title=this.options.pages.length,this.options.backCover?a.push(s):(i={src:s.src,thumb:s.thumb,title:2*r,htmlContent:s.htmlContent,json:s.json,side:"left"},n={src:s.src,thumb:s.thumb,title:2*r+1,htmlContent:s.htmlContent,json:s.json,side:"right"},a.push(i),a.push(n)),this.options.pages=a}if(this.addPageNames(),this.options.numPages=this.options.pages.length,this.options.numPages%2==0||this.options.singlePageMode||(this.options.backCover=!1,this.options.cover||(this.options.backCover=!this.options.backCover),this.options.pages.push({src:this.options.assets.preloader,thumb:this.options.assets.preloader,empty:!0})),this.options.pages.forEach((e=>{const t=e.htmlContent||"",i=o.createElement("div");i.className="flipbook-page-html";const n=o.createElement("div");n.className="htmlContent",n.innerHTML=t,i.appendChild(n),e.htmlContent=i})),"webgl"==this.options.viewMode){var l=this.options;l.scroll=this.scroll,l.parent=this,this.Book=new FLIPBOOK.BookWebGL(this.book[0],this,l),this.webglMode=!0,this.initSwipe(),this.initSound()}else"swipe"==this.options.viewMode?(this.Book=new FLIPBOOK.BookSwipe(this.book[0],this.bookLayer[0],this,t),this.initSwipe()):"scroll"==this.options.viewMode?(this.options.singlePageMode=!0,this.Book=new FLIPBOOK.BookScroll(this.book[0],this.bookLayer[0],this,t),this.initSwipe()):("2d"!=this.options.viewMode&&(this.options.viewMode="3d"),this.Book=new FLIPBOOK.Book3(this.book[0],this,t),this.initSwipe(),this.webglMode=!1,this.initSound());(this.resize(),this.Book.enable(),this.book.hide().fadeIn("slow"),this.tocCreated=!1,this.options.tableOfContent.length)||(!!this.options.pages&&this.options.pages.some((e=>!!e.title))||(this.options.btnToc.enabled=!1));if(!this.options.pdfMode){var h=!!this.options.pages&&this.options.pages.some((e=>!!e.json));this.options.hasHtmlContent||h||(this.options.btnSearch.enabled=!1)}this.createMenu(),this.onZoom(this.options.zoomMin),1==this.options.pages.length&&(this.rightToLeft=!1),FLIPBOOK.books=FLIPBOOK.books||{},FLIPBOOK.books[e.id]=e.Book;var p=jQuery(e.Book);p.bind("loadPagesFromPdf",(function(t,o,i,n){e.loadPagesFromPdf(o,i,n)})),p.bind("turnPageComplete",(function(t){e.turnPageComplete()})),p.bind("initEasing",(function(t){e.initEasing()})),p.bind("playFlipSound",(function(t){e.playFlipSound()})),p.bind("closeLightbox",(function(t){e.closeLightbox()})),p.bind("updateCurrentPage",(function(t){e.updateCurrentPage()})),this.createLogo(),this.onBookCreated()},initNotes:function(){this.noteService=new FLIPBOOK.Notes(this);const e=this;t.addEventListener("r3d-update-note-visibility",(function(t){e.options.noteTypes.forEach((function(e){t.detail.id==e.id&&(e.enabled=t.detail.enabled)})),e.noteService.updateNoteVisibility()}))},createTooltip:function(){this.tooltip=new FLIPBOOK.Tooltip,this.wrapper[0].appendChild(this.tooltip.domElement)},showTooltip:function(e){this.tooltip.show(e)},hideTooltip:function(){this.tooltip.hide()},addPageItems:function(){},spotlight:function(e,t,o){},resizeContainer:function(){if(!this.lightbox&&!this.options.fullscreen){var e=this.pageW/this.pageH,t=2*e;let i,n=this.$elem[0].getBoundingClientRect().width;i=this.options.isMobile&&n<this.options.responsiveViewTreshold?e:t;var o=n/(this.options.containerRatio||i);o+=this.wrapper.height()-this.bookLayer.height(),this.$elem[0].style.height=o+"px"}this.resize()},onBookCreated:function(){var e=this.options,i=this;!e.cover&&Number(e.startPage)<2&&(e.startPage=2);var n=o.documentElement;n.style.setProperty("--flipbook-link-color",this.options.linkColor),n.style.setProperty("--flipbook-link-color-hover",this.options.linkColorHover),n.style.setProperty("--flipbook-link-opacity",this.options.linkOpacity),this.resizeContainer();new ResizeObserver((e=>{i.resizeContainer()})).observe(this.$elem[0]),t.addEventListener("resize",(function(e){i.resizeContainer()}));new ResizeObserver((()=>{i.resize()})).observe(this.bookLayer[0]),this.resize(),e.rightToLeft?this.goToPage(Number(e.pages.length-Number(e.startPage)+1),!0):this.goToPage(Number(e.startPage),!0),this.Book.updateVisiblePages(),this.Book.zoomTo(e.zoomMin),this.updateCurrentPage(),this.playBgMusic(),o.addEventListener("keydown",(function(e){if(i.Book.enabled&&(i.options.lightBox||!o.body.classList.contains("flipbook-overflow-hidden"))&&(i.fullscreenActive||!o.body.classList.contains("flipbook-fullscreen"))&&(i.options.arrowsAlwaysEnabledForNavigation&&(37==e.keyCode||39==e.keyCode)||!i.options.lightBox&&!i.fullscreenActive&&(i.options.arrowsDisabledNotFullscreen||i.bodyHasVerticalScrollbar()))){switch((e=e||t.event).keyCode){case 37:i.zoom>1?i.moveBook("left"):i.prevPage();break;case 38:i.zoom>1?i.moveBook("up"):i.nextPage();break;case 39:i.zoom>1?i.moveBook("right"):i.nextPage();break;case 33:i.prevPage();break;case 34:i.nextPage();break;case 36:i.firstPage();break;case 35:i.lastPage();break;case 40:i.zoom>1?i.moveBook("down"):i.prevPage();break;case 107:case 187:i.zoomIn();break;case 109:case 189:i.zoomOut()}return!1}})),o.addEventListener("MSFullscreenChange",(function(e){i.handleFsChange()})),o.addEventListener("mozfullscreenchange",(function(e){i.handleFsChange()})),o.addEventListener("webkitfullscreenchange",(function(e){i.handleFsChange()})),o.addEventListener("fullscreenchange",(function(e){i.handleFsChange()})),e.lightboxCloseOnBack&&(t.onpopstate=function(){i.Book.enabled&&FLIPBOOK.lightboxOpened&&(t.location.hash||i.lightbox.closeLightbox(!0))}),this.bookLayer.bind("DOMMouseScroll",(function(e){if(i.Book.enabled&&(i.options.lightBox||i.fullscreenActive||!i.options.wheelDisabledNotFullscreen&&!i.bodyHasVerticalScrollbar()))return e.stopPropagation(),e.preventDefault(),e.originalEvent.detail>0?i.zoomOut(e.originalEvent):i.zoomIn(e.originalEvent),!1})),this.bookLayer.bind("mousewheel",(function(e){if(i.Book.enabled&&(i.options.lightBox||i.fullscreenActive||!i.options.wheelDisabledNotFullscreen&&!i.bodyHasVerticalScrollbar()))return"scroll"!=i.options.viewMode?(e.stopPropagation(),e.preventDefault(),e.originalEvent.wheelDelta<0?i.zoomOut(e.originalEvent):i.zoomIn(e.originalEvent),!1):void 0})),i.options.contentOnStart?i.toggleToc(!0):i.options.thumbnailsOnStart?(i.options.thumbsStyle="side",i.toggleThumbs(!0)):i.options.searchOnStart&&(i.toggleSearch(!0),"string"==typeof i.options.searchOnStart&&i.thumbs.$findInput.val(i.options.searchOnStart).trigger("keyup")),e.autoplayOnStart&&i.toggleAutoplay(!0),i.options.lightBox&&i.Book.disable(),i.initColors(),setTimeout((function(){i.resize(),i.Book.updateVisiblePages(),i.Book.zoomTo(e.zoomMin)}),500),e.onbookcreated&&e.onbookcreated.call(this)},initSound:function(){this.options.flipSound&&(this.flipSound=jQuery('<audio><source src="'+this.options.assets.flipMp3+'" type="audio/mpeg"></audio>')[0]),this.options.backgroundMusic&&(this.backgroundMusic=jQuery('<audio autoplay><source src="'+this.options.backgroundMusic+'" type="audio/mpeg"></audio>')[0])},touchSwipe:function(e,t){let o,i,n,s,a,r,l=!1,h=!1,p=0,d=!1;function c(e){if(e.length<2)return 0;let t=e[0].clientX-e[1].clientX,o=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+o*o)}function g(e,t){return{distanceX:e-o,distanceY:t-i}}function u(e){return e.type.includes("mouse")?e:e.touches[0]}var b=this;function m(n){if("touchstart"===n.type)d=!0;else{if("mousedown"===n.type&&d)return;if("A"===n.target.tagName||"SPAN"===n.target.tagName||"MARK"===n.target.tagName)return void b.trigger("disableIScroll")}b.trigger("enableIScroll");let a=u(n);o=a.clientX,i=a.clientY,s=(new Date).getTime(),l=!0,p=n.touches?n.touches.length:1,t(n,"start",null,0,0,p),e.addEventListener("mousemove",f),e.addEventListener("touchmove",f,{passive:!1})}function f(e){let o=u(e),{distanceX:i,distanceY:s}=g(o.clientX,o.clientY);if(a=o.clientX,r=o.clientY,l&&"mousemove"===e.type)e.preventDefault(),t(e,"move",i,s,0,1);else if(e.touches&&2===e.touches.length){let o;if(e.preventDefault(),"number"==typeof e.scale)o=e.scale;else{let t=c(e.touches);h?o=t/n:(h=!0,n=t,o=1)}h?t(e,"pinch",o,null,0,2):(h=!0,n=c(e.touches),t(e,"pinchstart",o,null,0,2))}else e.touches&&1===e.touches.length&&(b.zoom>1&&e.preventDefault(),t(e,"move",i,s,0,1))}function v(e){b.trigger("enableIScroll"),"touchend"!==e.type&&"mouseup"!==e.type||setTimeout((function(){d=!1}),300);let o=e.changedTouches?e.changedTouches[0]:e,{distanceX:i,distanceY:n}=g(o.clientX,o.clientY),a=(new Date).getTime()-s;l&&(l=!1,t(e,"end",i,n,a,e.changedTouches?e.changedTouches.length:1)),h&&(h=!1,t(e,"pinchend",null,0,0,2)),w()}function k(e){setTimeout((function(){d=!1}),300);let o=(new Date).getTime()-s,{distanceX:i,distanceY:n}=g(a,r);l&&(l=!1,t(e,"cancel",i,n,o,1)),h&&(h=!1,t(e,"pinchcancel",i,n,o,2)),w()}function w(){e.removeEventListener("mousemove",f),e.removeEventListener("touchmove",f)}e.addEventListener("mousedown",m),e.addEventListener("touchstart",m),e.addEventListener("mouseup",v),e.addEventListener("touchend",v),e.addEventListener("mouseleave",k),e.addEventListener("touchcancel",k)},initSwipe:function(){var e=this;let t=!1,o=!1,i=!1;this.touchSwipe(this.book[0],(function(n,s,a,r,l,h){if(i="toolSelect"==e.tool||e.options.pageDragDisabled,"start"==s){e.zoomStart=e.zoom;try{e.currentPageInput.trigger("blur")}catch(n){}}if(h>1&&"pinch"==s){let t=a;n.scale&&(t=n.scale),e.zoomTo(e.zoomStart*t,0,n),o=!0}if("end"==s){if(!e.options.doubleClickZoomDisabled)if(e.clickTimer){clearTimeout(e.clickTimer),delete e.clickTimer;if(null!==n.target.closest(".flipbook-page-html")){var p=e.options.zoomTime;e.zoom>=e.options.zoomMax?e.zoomTo(e.options.zoomMin,p,n):e.zoomTo(e.options.zoomMax,p,n)}}else e.clickTimer=setTimeout((function(){delete e.clickTimer}),300);Math.abs(a)<5&&l<200&&(t=!0)}t||o||i||e.Book.onSwipe(n,s,a,r,l,h),t=!1,"pinchend"==s&&(o=!1)})),this.swipeEnabled=!0},toggleMenu:function(){this.menuShowing?(this.menuShowing=!1,this.bookLayer.css("bottom","0px"),this.menuBottom.fadeOut(),this.currentPageHolder.fadeOut(),jQuery(".flipbook-nav").fadeOut(),this.Book.onResize()):(this.menuShowing=!0,this.bookLayer.css("bottom",this.menuBottom.height()+"px"),this.menuBottom.fadeIn(),this.currentPageHolder.fadeIn(),jQuery(".flipbook-nav").fadeIn(),this.Book.onResize())},createSVGIcon:function(e,t,o){var i=jQuery({plus:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg>',minus:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"/></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512"><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg>',expand:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z"/></svg>',compress:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V64zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32H96v64c0 17.7 14.3 32 32 32s32-14.3 32-32V352c0-17.7-14.3-32-32-32H32zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352V64zM320 320c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32V384h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H320z"/></svg>',thumbs:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M448 96V224H288V96H448zm0 192V416H288V288H448zM224 224H64V96H224V224zM64 288H224V416H64V288zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"/></svg>',print:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zM432 248a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg>',sound:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 640 512"><path d="M533.6 32.5C598.5 85.3 640 165.8 640 256s-41.5 170.8-106.4 223.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C557.5 398.2 592 331.2 592 256s-34.5-142.2-88.7-186.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM473.1 107c43.2 35.2 70.9 88.9 70.9 149s-27.7 113.8-70.9 149c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C475.3 341.3 496 301.1 496 256s-20.7-85.3-53.2-111.8c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zm-60.5 74.5C434.1 199.1 448 225.9 448 256s-13.9 56.9-35.4 74.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C393.1 284.4 400 271 400 256s-6.9-28.4-17.7-37.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3z"/></svg>',mute:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3zM425 167l55 55 55-55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-55 55 55 55c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-55-55-55 55c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l55-55-55-55c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z"/></svg>',facebook:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"/></svg>',twitter:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>',list:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path d="M24 56c0-13.3 10.7-24 24-24H80c13.3 0 24 10.7 24 24V176h16c13.3 0 24 10.7 24 24s-10.7 24-24 24H40c-13.3 0-24-10.7-24-24s10.7-24 24-24H56V80H48C34.7 80 24 69.3 24 56zM86.7 341.2c-6.5-7.4-18.3-6.9-24 1.2L51.5 357.9c-7.7 10.8-22.7 13.3-33.5 5.6s-13.3-22.7-5.6-33.5l11.1-15.6c23.7-33.2 72.3-35.6 99.2-4.9c21.3 24.4 20.8 60.9-1.1 84.7L86.8 432H120c13.3 0 24 10.7 24 24s-10.7 24-24 24H32c-9.5 0-18.2-5.6-22-14.4s-2.1-18.9 4.3-25.9l72-78c5.3-5.8 5.4-14.6 .3-20.5zM224 64H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 160H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 160H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>',pdf:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M64 464l48 0 0 48-48 0c-35.3 0-64-28.7-64-64L0 64C0 28.7 28.7 0 64 0L229.5 0c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3L384 304l-48 0 0-144-80 0c-17.7 0-32-14.3-32-32l0-80L64 48c-8.8 0-16 7.2-16 16l0 384c0 8.8 7.2 16 16 16zM176 352l32 0c30.9 0 56 25.1 56 56s-25.1 56-56 56l-16 0 0 32c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-48 0-80c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0 48 16 0zm96-80l32 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-32 0c-8.8 0-16-7.2-16-16l0-128c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16l0-64c0-8.8-7.2-16-16-16l-16 0 0 96 16 0zm80-112c0-8.8 7.2-16 16-16l48 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 32 32 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 48c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-64 0-64z"/></svg>',tools:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 128 512"><path d="M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"/></svg>'}[e]).attr("aria-hidden","true").addClass("flipbook-icon flipbook-menu-btn skin-color");return o||i.addClass("skin-color-bg"),t&&i.addClass("flipbook-icon-reverse"),i},createButton:function(e){var t=this.options,i=!e.toolsMenu&&("top"==e.vAlign&&t.menu2Transparent||"top"!=e.vAlign&&t.menuTransparent),n=e.background||(i?t.floatingBtnBackground:t.btnBackground),s=(e.backgroundHover||(i?t.floatingBtnBackgroundHover:t.btnBackgroundHover),e.color||(i?t.floatingBtnColor:t.btnColor)),a=(e.colorHover||(i?t.floatingBtnColorHover:t.btnColorHover),i?t.floatingBtnTextShadow:t.btnTextShadow),r=e.radius||(i?t.floatingBtnRadius:t.btnRadius),l=e.border||(i?t.floatingBtnBorder:t.btnBorder),h=i?t.floatingBtnMargin:t.btnMargin,p=t.btnPaddingV+2,d=t.btnPaddingH+2,c=jQuery(o.createElement("span")),g="material"==t.icons?(e.size||t.btnSize)+8:e.size||t.btnSize;function u(e){e.css({"font-size":g+"px",margin:h+"px",padding:p+"px "+d+"px","border-radius":r+"px","box-shadow":t.btnShadow,border:l,color:s,fill:s,background:n,"text-shadow":a,width:g+"px",height:g+"px"}),s&&e.removeClass("skin-color"),n&&e.removeClass("skin-color-bg")}e.toolsMenu&&(n="none");const b=e.svg||e.name.replace("btn","").toLowerCase();var m;c.$icon=this.createSVGIcon(b,e.iconReverse).appendTo(c),u(c.$icon),e.svgAlt&&(c.$iconAlt=this.createSVGIcon(e.svgAlt,e.iconReverse).appendTo(c).hide(),u(c.$iconAlt)),e.onclick&&c.bind("click",(function(t){e.onclick()}));return e.toolsMenu?(m=this.toolsMenu,jQuery("<span>"+e.title+"</span>").appendTo(c).addClass("skin-color")):m="top"==e.vAlign?t.menu2Floating?this.menuTC:"left"==e.hAlign?this.menuTL:"right"==e.hAlign?this.menuTR:this.menuTC:t.menuFloating?this.menuBC:"left"==e.hAlign?this.menuBL:"right"==e.hAlign?this.menuBR:this.menuBC,c.attr("data-name",e.name).appendTo(m).addClass("flipbook-menu-btn-wrapper").css("order",e.order),e.toolsMenu||c.attr("data-tooltip",e.title).addClass("flipbook-has-tooltip"),c},createMenu:function(){if(!this.menuBottom){var e=this.options,t=e.menuFloating?"flipbook-menu-floating":"flipbook-menu-fixed",i=e.menu2Floating?"flipbook-menu-floating":"flipbook-menu-fixed",n=this;this.menuBottom=jQuery(o.createElement("div")).addClass("flipbook-menuBottom").addClass(t).appendTo(this.wrapper).css({background:e.menuBackground,"box-shadow":e.menuShadow,margin:e.menuMargin+"px",padding:e.menuPadding+"px"}),e.menuTransparent||e.menuBackground||this.menuBottom.addClass("skin-color-bg"),e.hideMenu&&this.menuBottom.hide(),this.menuTop=jQuery(o.createElement("div")).addClass("flipbook-menuTop").addClass(i).appendTo(this.wrapper).css({background:e.menu2Background,"box-shadow":e.menu2Shadow,margin:e.menu2Margin+"px",padding:e.menu2Padding+"px"}),e.menu2Transparent||e.menu2Background||this.menuTop.addClass("skin-color-bg"),"swipe"==e.viewMode&&(e.btnSound.enabled=!1),this.menuBL=jQuery(o.createElement("div")).addClass("flipbook-menu flipbook-menu-left").appendTo(this.menuBottom),this.menuBC=jQuery(o.createElement("div")).addClass("flipbook-menu flipbook-menu-center").appendTo(this.menuBottom),this.menuBR=jQuery(o.createElement("div")).addClass("flipbook-menu flipbook-menu-right").appendTo(this.menuBottom),this.menuTL=jQuery(o.createElement("div")).addClass("flipbook-menu flipbook-menu-left").appendTo(this.menuTop),this.menuTC=jQuery(o.createElement("div")).addClass("flipbook-menu flipbook-menu-center").appendTo(this.menuTop),this.menuTR=jQuery(o.createElement("div")).addClass("flipbook-menu flipbook-menu-right").appendTo(this.menuTop),this.options.btnTools.enabled&&(this.toolsMenu=jQuery('<div class="flipbook-tools flipbook-submenu skin-color skin-color-bg flipbook-font"></div>')),this.options.btnShare.enabled&&(this.shareMenu=jQuery('<div class="flipbook-share flipbook-submenu skin-color skin-color-bg flipbook-font"></div>')),e.sideNavigationButtons&&(this.$arrowWrapper=jQuery('<div class="flipbook-nav"></div>').appendTo(this.bookLayer),this.btnNext=this.createSVGIcon("next").appendTo(this.$arrowWrapper).addClass("flipbook-right-arrow").css({height:e.arrowSize+"px","font-size":e.arrowSize+"px","margin-top":String(-e.arrowSize/2)+"px","margin-right":e.arrowMargin+"px"}),l(this.btnNext,this.nextPage.bind(this)),this.btnPrev=this.createSVGIcon("next",!0).appendTo(this.$arrowWrapper).addClass("flipbook-left-arrow").css({height:e.arrowSize+"px","font-size":e.arrowSize+"px","margin-top":String(-e.arrowSize/2)+"px","margin-left":e.arrowMargin+"px"}),l(this.btnPrev,this.prevPage.bind(this)),e.btnFirst.enabled&&(this.btnFirst=this.createSVGIcon("last",!0).appendTo(this.$arrowWrapper).addClass("flipbook-first-arrow").css({height:.5*e.arrowSize+"px","font-size":.5*e.arrowSize+"px","margin-top":String(e.arrowSize/2+e.arrowMargin+2*e.arrowPadding)+"px","margin-left":e.arrowMargin+"px"}),l(this.btnFirst,this.firstPage.bind(this))),e.btnLast.enabled&&(this.btnLast=this.createSVGIcon("last").appendTo(this.$arrowWrapper).addClass("flipbook-last-arrow").css({height:.5*e.arrowSize+"px","font-size":.5*e.arrowSize+"px","margin-top":String(e.arrowSize/2+e.arrowMargin+2*e.arrowPadding)+"px","margin-right":e.arrowMargin+"px"}),l(this.btnLast,this.lastPage.bind(this))),e.menuNavigationButtons||(e.btnOrder.indexOf("btnFirst")>=0&&e.btnOrder.splice(e.btnOrder.indexOf("btnFirst"),1),e.btnOrder.indexOf("btnPrev")>=0&&e.btnOrder.splice(e.btnOrder.indexOf("btnPrev"),1),e.btnOrder.indexOf("btnNext")>=0&&e.btnOrder.splice(e.btnOrder.indexOf("btnNext"),1),e.btnOrder.indexOf("btnLast")>=0&&e.btnOrder.splice(e.btnOrder.indexOf("btnLast"),1))),e.pdfMode&&!e.btnDownloadPdf.url&&(e.btnDownloadPdf.url=e.pdfUrl),!e.pdfTextLayer&&e.btnSearch&&(e.btnSearch.enabled=!1),e.btnOrder=["currentPage","btnZoomOut","btnZoomIn","btnThumbs","btnToc","btnShare","btnPrint","btnDownloadPdf","btnSound","btnTools","btnExpand","btnClose"];for(var s=0;s<e.btnOrder.length;s++){var a=e.btnOrder[s],r=e[a];e.isMobile&&r.hideOnMobile&&(r.enabled=!1),r.enabled&&(r.name=a,"currentPage"==r.name?this.createCurrentPage():"search"==r.name||(this[a]=this.createButton(r).bind("click",(function(e){e.stopPropagation(),e.preventDefault(),n.onButtonClick(this,e)}))))}e.buttons&&e.buttons.forEach((e=>{n.createButton(e).index(1)}))}function l(t,o){t.bind("click",(function(e){if(t.disabled)return!1;t.disabled=!0,setTimeout((function(){t.disabled=!1}),300),e.stopPropagation(),e.preventDefault(),o()})),t.css({width:e.arrowSize+"px","border-radius":e.arrowRadius+"px",padding:e.arrowPadding+"px ",filter:"drop-shadow("+e.arrowTextShadow+")",border:e.arrowBorder,color:e.arrowColor,fill:e.arrowColor,background:e.arrowBackground,"box-sizing":"initial"}),e.arrowBackgroundHover&&t.hover((function(){this.style.background=e.arrowBackgroundHover}),(function(){this.style.background=e.arrowBackground})),e.arrowColor&&t.removeClass("skin-color"),e.arrowBackground&&t.removeClass("skin-color-bg")}},onButtonClick:function(e,i){var n=jQuery(e).attr("data-name"),s=this.options;switch(n){case"btnFirst":this.firstPage();break;case"btnPrev":this.prevPage();break;case"btnNext":this.nextPage();break;case"btnLast":this.lastPage();break;case"btnZoomIn":this.zoomIn();break;case"btnZoomOut":this.zoomOut();break;case"btnAutoplay":this.autoplay||this.nextPage(),this.toggleAutoplay();break;case"btnSearch":this.toggleSearch();break;case"btnBookmark":this.toggleBookmark();break;case"btnRotateLeft":this.Book.rotateLeft&&this.Book.rotateLeft();break;case"btnRotateRight":this.Book.rotateRight&&this.Book.rotateRight();break;case"btnToc":this.toggleToc();break;case"btnThumbs":this.toggleThumbs();break;case"btnShare":this.toggleShareMenu();break;case"btnTools":this.toggleToolsMenu();break;case"btnNotes":this.toggleNotesMenu();break;case"btnDownloadPages":if(s.downloadMenu)this.toggleDownloadMenu();else{var a=o.createElement("a");a.href=s.btnDownloadPages.url,a.download=s.btnDownloadPages.name,a.dispatchEvent(new MouseEvent("click"))}break;case"btnPrint":s.printMenu?this.togglePrintMenu():this.togglePrintWindow();break;case"btnDownloadPdf":if(s.btnDownloadPdf.forceDownload){var r=s.btnDownloadPdf.url,l=o.createElement("a");l.href=r;var h=l.href.split("/").pop().split("#")[0].split("?")[0];l.download=h,o.body.appendChild(l),l.click(),o.body.removeChild(l)}else{var p=s.btnDownloadPdf.openInNewWindow||(s.btnDownloadPdf.openInNewWindow,1)?"_blank":"_self";t.open(s.btnDownloadPdf.url,p)}this.sendGAEvent({event:"flipbook_pdf_download",book_name:this.options.name,url:s.btnDownloadPdf.url||s.pdfUrl,nonInteraction:!0});break;case"btnSound":this.toggleSound();break;case"btnExpand":this.toggleExpand();break;case"btnClose":this.lightbox.closeLightbox()}},handleFsChange:function(e){if(this.Book&&this.Book.enabled){var t=jQuery(this.fullscreenElement);(o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement)===this.fullscreenElement||this.isFullscreen?(e&&(t.addClass("flipbook-browser-fullscreen"),this.fullscreenElement.parentNodeOld=this.fullscreenElement.parentNode,this.options.lightBox||t.appendTo(jQuery("body"))),this.fullscreenActive=!0,this.options.onfullscreenenter&&this.options.onfullscreenenter.call(this),o.body.classList.add("flipbook-fullscreen")):(e&&(t.removeClass("flipbook-browser-fullscreen"),this.options.lightBox||t.appendTo(jQuery(this.fullscreenElement.parentNodeOld))),this.fullscreenActive=!1,this.options.onfullscreenexit&&this.options.onfullscreenexit.call(this),o.body.classList.remove("flipbook-fullscreen")),this.toggleIcon(this.btnExpand,!this.fullscreenActive)}},createLogo:function(){var e=this.options;if(e.logoImg&&(!e.isMobile||!e.logoHideOnMobile)){var o=jQuery("<img>").attr("src",e.logoImg).attr("style",e.logoCSS).appendTo(this.wrapper);"right"==e.logoAlignH&&o.css("right","0"),"bottom"==e.logoAlignV&&o.css("bottom","0"),e.logoUrl&&o.css("cursor","pointer").bind("click",(function(o){o.stopPropagation(),o.preventDefault(),t.open(e.logoUrl,e.logoUrlTarget||"_blank")}))}},setLoadingProgress:function(e){this.disposed||(this.$fillPreloader?this.setFillPreloaderProgress(e):e>0&&e<1?this.preloader.show():this.preloader.hide())},setFillPreloaderProgress:function(e){if(this.$fillPreloader)if(e>0&&e<1){if(this.fillPreloaderProgress=this.fillPreloaderProgress||0,e<this.fillPreloaderProgress)return;this.fillPreloaderProgress=e;var t=this.$fillPreloaderImg[0];t.style.clip="rect(0px,"+t.width*e+"px,"+t.height+"px,0px)",this.$fillPreloader.show()}else this.$fillPreloader.hide()},playFlipSound:function(){if(this.options.sound&&this.Book.enabled&&void 0!==this.flipSound.play){this.flipSound.currentTime=0;var e=this;setTimeout((function(){e.flipSound.play().then((function(){}),(function(){}))}),70)}},playBgMusic:function(){if(this.options.sound&&this.backgroundMusic&&this.backgroundMusic.play){var e=this;this.backgroundMusic.play().then((function(){}),(function(t){setTimeout((function(){e.playBgMusic()}),100)}))}},onMouseWheel:function(e){if("wheelDeltaX"in e)wheelDeltaX=e.wheelDeltaX/12,wheelDeltaY=e.wheelDeltaY/12;else if("wheelDelta"in e)wheelDeltaX=wheelDeltaY=e.wheelDelta/12;else{if(!("detail"in e))return;wheelDeltaX=wheelDeltaY=3*-e.detail}wheelDeltaX>0?this.zoomIn(e):this.zoomOut(e)},zoomTo:function(e,t,o){var i,n;this.zoom=e,void 0===o?(i=this.wrapperW/2,n=this.wrapperH/2):(o.touches&&o.touches[0]?(i=o.touches[0].pageX,n=o.touches[0].pageY):o.changedTouches&&o.changedTouches[0]?(i=o.changedTouches[0].pageX,n=o.changedTouches[0].pageY):(i=o.pageX,n=o.pageY),i-=this.wrapper.offset().left,n-=this.wrapper.offset().top);const s=this.getZoomMin();this.zoom<s&&(this.zoom=s),this.zoom>this.options.zoomMax&&(this.zoom=this.options.zoomMax),this.options.zoomMax2&&this.zoom>this.options.zoomMax2&&(this.zoom=this.options.zoomMax2),this.Book.zoomTo(this.zoom,t,i,n),this.onZoom(this.zoom)},zoomOut:function(e){var t=this.zoom-.1*this.options.zoomStep;t<1&&this.zoom>1&&(t=1);const o=this.getZoomMin();if(t=t<o?o:t,this.zoom!=t){this.zoom=t;var i=this.options.zoomTime;this.zoomTo(this.zoom,i,e)}},zoomIn:function(e){var t=this.zoom+.1*this.options.zoomStep;t>1&&this.zoom<1&&(t=1),t>this.options.zoomMax&&(t=this.options.zoomMax),this.zoom!=t&&(this.zoom=t,this.zoomTo(this.zoom,this.options.zoomTime,e))},getZoomMin:function(){return"scroll"==this.options.viewMode?this.options.zoomMin2:this.options.zoomMin},nextPage:function(){this.Book&&(this.flippingPage=!0,this.Book.nextPage())},prevPage:function(){this.Book&&(this.flippingPage=!0,this.Book.prevPage())},firstPage:function(){this.goToPage(1)},lastPage:function(){this.goToPage(this.options.pages.length)},goToPage:function(e,t){this.Book&&(t||(this.flippingPage=!0),this.options.cover||e++,e<1?e=1:e>this.options.numPages&&!this.options.rightToLeft&&(e=this.options.numPages),this.Book.goToPage(e,t))},moveBook:function(e){this.Book&&this.Book.move&&this.Book.move(e)},onZoom:function(e){this.zoom=e;const t=this.getZoomMin();this.enableButton(this.btnZoomIn,e<this.options.zoomMax),this.enableButton(this.btnZoomOut,e>t),this.enableSwipe(e<=1)},enableSwipe:function(e){this.swipeEnabled=e},createCurrentPage:function(){var e,t=this,i=this.options,n="flipbook-currentPageHolder ";e="top"==i.currentPage.vAlign?"left"==i.currentPage.hAlign?this.menuTL:"right"==i.currentPage.hAlign?this.menuTR:this.menuTC:"left"==i.currentPage.hAlign?this.menuBL:"right"==i.currentPage.hAlign?this.menuBR:this.menuBC;var s="top"==i.currentPage.vAlign&&i.menu2Transparent||"top"!=i.currentPage.vAlign&&i.menuTransparent,a=s?i.floatingBtnBackground:"",r=s?i.floatingBtnColor:i.btnColor,l=s?i.floatingBtnTextShadow:"",h=s?i.floatingBtnRadius:i.btnRadius,p=jQuery("<div>").appendTo(e);p.css({margin:i.currentPage.marginV+"px "+i.currentPage.marginH+"px",height:i.btnSize+"px",padding:i.btnPaddingV+"px"}),s||(n+="skin-color "),p.addClass(n).css({color:r,background:a,"text-shadow":l,"border-radius":h+"px"}),i.currentPage.order&&p.css("order",i.currentPage.order),this.currentPageHolder=p;var d=jQuery("<form>").appendTo(p).submit((function(e){var o=parseInt(t.currentPageInput.val());return t.options.rightToLeft?(o=i.pages.length-o+1,o-=t.options.pageNumberOffset):(o=o>i.pages.length?i.pages.length:o,o+=t.options.pageNumberOffset),t.goToPage(o),!1}));this.currentPageInput=jQuery('<input type="text">').addClass("flipbook-currentPageInput").css({margin:i.currentPage.marginV+"px "+i.currentPage.marginH+"px",color:r}).focus((function(){t.currentPageInput.val("")})).blur((function(){t.currentPageInput.val(t.currentPageString)})).appendTo(d);var c=String(i.numPages).length;this.currentPageInput.addClass("digits-"+c).attr("maxlength",c),this.currentPage=jQuery(o.createElement("div")).addClass("flipbook-currentPageNumber").appendTo(p),s||this.currentPageInput.addClass("skin-color")},createMenuHeader:function(e,t,o){var i=this,n=jQuery("<div>").addClass("flipbook-menu-header skin-clor flipbook-font").appendTo(e);jQuery("<span>").text(t).addClass("flipbook-menu-title skin-color").appendTo(n);var s=jQuery("<span>").appendTo(n).addClass("flipbook-btn-close").bind("click",(function(e){e.stopPropagation(),e.preventDefault(),i.closeMenus()}));this.createSVGIcon("close",null,!0).appendTo(s)},createToc:function(){var e=this.options.tableOfContent;this.tocHolder=jQuery("<div>").addClass("flipbook-tocHolder flipbook-side-menu skin-color-bg").appendTo(this.wrapper).css(this.options.sideMenuPosition,"0").hide(),this.createMenuHeader(this.tocHolder,this.strings.tableOfContent,this.toggleToc),this.toc=jQuery("<div>").addClass("flipbook-toc").appendTo(this.tocHolder),this.tocScroller=jQuery("<div>").addClass("flipbook-toc-scroller").appendTo(this.toc);var t=this.options.pages;if(e&&e.length>0)for(var o=0;o<e.length;o++)t[o]&&t[o].name&&e[o].page&&(e[o].pageNumberDisplay=t[e[o].page-1].name),this.createTocItem(e[o]);else for(o=0;o<t.length;o++)t[o].title&&this.createTocItem({title:t[o].title,page:String(o+1),pageNumberDisplay:t[o].name});this.initColors(),this.tocCreated=!0,this.toggleToc()},goToDest:function(e){},createTocItem:function(e,t,i){var n=this;t=t||this.tocScroller;var s=this.options.rightToLeft,a=jQuery(o.createElement("a")).attr("class","flipbook-tocItem").addClass("skin-color").css("direction",s?"rtl":"ltr").appendTo(t).bind("click",(function(t){if(t.stopPropagation(),t.preventDefault(),n.options.tableOfContentCloseOnClick&&n.toggleToc(!1),!e.page&&e.dest)"string"==typeof e.dest?n.pdfService.pdfDocument.getDestination(e.dest).then((function(e){n.goToDest(e)})):n.goToDest(e.dest);else{var o=Number(e.page);o=n.options.rightToLeft?n.options.pages.length-o+1:o,setTimeout((function(){n.goToPage(o)}),200)}}));i||(i=0),a.level=i,a.css("padding","8px 0"),a.css("margin-"+(s?"right":"left"),"10px"),i?(a.css("margin-top","8px"),a.css("padding-bottom","0")):(a.css("margin-right","15px"),a.css("padding-left","10px"));var r=jQuery(o.createElement("span")).appendTo(a).css("width","20px").css("display","inline-block").css("cursor","auto").bind("click",(function(e){e.stopPropagation(),e.preventDefault();for(var t=0;t<a.items.length;t++)a.items[t].toggle();l.toggle(),h.toggle()})),l=this.createSVGIcon("next").appendTo(r).hide();s&&(l[0].style.transform="rotate(180deg)");var h=this.createSVGIcon("next").appendTo(r).hide();if(h[0].style.transform="rotate(90deg)",jQuery(o.createElement("span")).appendTo(a).addClass("title").text(e.title).css("width",String(150-10*a.level)+"px"),!e.pageHidden){var p=e.pageNumberDisplay;p&&p!=e.title&&jQuery(o.createElement("span")).appendTo(a).width("25px").css("display","inline-block").css("text-align","right").text(p)}if(e.items&&e.items.length){a.items=[];for(var d=0;d<e.items.length;d++){var c=this.createTocItem(e.items[d],a,a.level+1);a.items.push(c),c.hide()}l.show()}return a},enablePrev:function(e){this.enableButton(this.btnPrev,e),this.enableButton(this.btnFirst,e),this.Book.enablePrev(e)},enableNext:function(e){this.enableButton(this.btnNext,e),this.enableButton(this.btnLast,e),this.Book.enableNext(e)},enableButton:function(e,t){void 0!==e&&(t?e.removeClass("disabled"):e.addClass("disabled"),e.enabled=t)},resize:function(){var e=this.options;if(this.updateWrapperDimensions(),this.Book&&this.Book.enabled){if(this.menuShowing&&(this.bookLayer.css("bottom",!e.menuOverBook&&this.menuBottom?this.menuBottom.outerHeight()+"px":"0px"),this.bookLayer.css("top",!e.menu2OverBook&&this.menuTop?this.menuTop.outerHeight()+"px":"0px")),this.tocShowing||this.thumbsShowing||this.searchShowing||this.bookmarkShowing){this.bookLayer.css(this.options.sideMenuPosition,e.sideMenuOverBook?"0px":"250px");let t={bottom:"0px",top:"0px"};e.sideMenuOverMenu||(t.bottom=this.menuBottom.outerHeight()+"px"),e.sideMenuOverMenu2||(t.top=this.menuTop.outerHeight()+"px"),this.wrapper.find(".flipbook-side-menu").css(t)}else this.bookLayer.css(this.options.sideMenuPosition,"0px");this.adjustZoomLimits(),this.Book.onResize(),e.zoomReset&&this.Book.zoomTo(e.zoomMin)}},updateWrapperDimensions:function(){let e=this.bookLayer[0].getBoundingClientRect();this.wrapperW=e.width,this.wrapperH=e.height},adjustZoomLimits:function(){var e=this.options,t=this.wrapperW/this.wrapperH,o=this.pageW/this.pageH,i=2*o;"scroll"==e.viewMode?e.zoomMax=e.zoomSize*e.pageWidth/e.pageHeight*2/this.wrapperW:e.responsiveView&&this.wrapperW<=e.responsiveViewTreshold&&t<i&&t<e.responsiveViewRatio?e.zoomMax=e.zoomSize/this.wrapperH*(t>o?1:o/t):e.zoomMax=e.zoomSize/this.wrapperH*(t>i?1:i/t),e.zoomMax=Math.max(e.zoomMax,e.zoomMin)},pdfResize:function(){this.Book.onZoom()},createThumbs:function(){this.thumbs=new FLIPBOOK.Thumbnails(this)},toggleThumbs:function(e){this.thumbs||this.createThumbs(),void 0!==e&&(this.thumbsShowing=!e),this.thumbsShowing?(this.thumbs.hide(),this.thumbsShowing=!1):(this.closeMenus(),this.thumbs.show(),this.thumbsShowing=!0),this.resize()},toggleToc:function(e){this.tocCreated?(!this.tocShowing||e?(this.closeMenus(),this.tocShowing=!0,this.tocHolder.show()):(this.tocHolder.hide(),this.tocShowing=!1),this.resize()):this.createToc()},toggleSearch:function(e){},toggleBookmark:function(e){},closeMenus:function(){this.thumbsShowing&&this.toggleThumbs(),this.tocShowing&&this.toggleToc(),this.searchShowing&&this.toggleSearch(),this.bookmarkShowing&&this.toggleBookmark(),this.printMenuShowing&&this.togglePrintMenu(),this.dlMenuShowing&&this.toggleDownloadMenu(),this.shareMenuShowing&&this.toggleShareMenu(),this.toolsMenuShowing&&this.toggleToolsMenu(),this.notesMenuShowing&&this.toggleNotesMenu(),this.passwordMenuShowing&&this.togglePasswordMenu()},toggleToolsMenu:function(){var e=this;this.toolsMenu.parent().length?this.toolsMenuShowing?(this.toolsMenu.hide(),this.toolsMenuShowing=!1,this.btnTools.removeClass("flipbook-btn-active").addClass("flipbook-has-tooltip")):(this.closeMenus(),this.toolsMenu.show(),this.toolsMenuShowing=!0,this.btnTools.addClass("flipbook-btn-active").removeClass("flipbook-has-tooltip")):(this.toolsMenu.appendTo(this.btnTools),this.initColors(),this.closeMenus(),this.toolsMenu.show(),this.btnTools.addClass("flipbook-btn-active").removeClass("flipbook-has-tooltip"),this.toolsMenuShowing=!0,this.toolsMenu[0].addEventListener("click",(function(e){e.stopPropagation()})),o.addEventListener("click",(function(t){e.toolsMenuShowing&&e.toggleToolsMenu(),e.shareMenuShowing&&e.toggleShareMenu()})))},togglePrintMenu:function(){var e=this;if(this.printMenu)this.printMenuShowing?(this.printMenu.hide(),this.printMenuShowing=!1):(this.closeMenus(),this.printMenu.show(),this.printMenuShowing=!0,this.updateCurrentPage());else{this.printMenu=jQuery('<div class="flipbook-sub-menu flipbook-font">').appendTo(this.wrapper);var t=jQuery('<div class="flipbook-sub-menu-center">').appendTo(this.printMenu),o=jQuery('<div class="flipbook-sub-menu-content skin-color-bg">').appendTo(t);this.createMenuHeader(o,this.strings.print,this.togglePrintMenu),jQuery('<a><div class="c-p skin-color flipbook-btn">'+this.strings.printCurrentPage+"</div></a>").appendTo(o).bind("click",(function(t){e.printPage(e.cPage[0],this)})),jQuery('<a><div class="c-l-p skin-color flipbook-btn">'+this.strings.printLeftPage+"</div></a>").appendTo(this.printMenu).appendTo(o).bind("click",(function(t){e.printPage(e.cPage[0],this)})),jQuery('<a><div class="c-r-p skin-color flipbook-btn">'+this.strings.printRightPage+"</div></a>").appendTo(this.printMenu).appendTo(o).bind("click",(function(t){e.printPage(e.cPage[1],this)})),jQuery('<a><div class="skin-color flipbook-btn">'+this.strings.printAllPages+"</div></a>").appendTo(o).bind("click",(function(t){e.togglePrintWindow()})),this.closeMenus(),this.printMenuShowing=!0,this.initColors(),this.updateCurrentPage()}},toggleDownloadMenu:function(){},toggleShareMenu:function(){var e=this;if(this.shareMenu.parent().length)this.shareMenuShowing?(this.shareMenu.hide(),this.shareMenuShowing=!1,this.btnShare.removeClass("flipbook-btn-active").addClass("flipbook-has-tooltip")):(this.closeMenus(),this.shareMenu.show(),this.shareMenuShowing=!0,this.btnShare.addClass("flipbook-btn-active").removeClass("flipbook-has-tooltip"));else{this.shareMenu.appendTo(this.btnShare),this.initColors(),this.closeMenus(),this.shareMenu.show(),this.shareMenu.addClass("flipbook-btn-active").removeClass("flipbook-has-tooltip"),this.shareMenuShowing=!0,this.shareMenu[0].addEventListener("click",(function(e){e.stopPropagation()})),o.addEventListener("click",(function(t){e.toolsMenuShowing&&e.toggleToolsMenu(),e.shareMenuShowing&&e.toggleShareMenu()}));var i=this.options,n=t.screen.width/2-300,s=t.screen.height/2-300;["facebook","twitter"].forEach((function(o){if(i[o].enabled){var a=jQuery('<span class="flipbook-menu-btn-wrapper" data-network="'+o+'"></span>');e.createSVGIcon(o).appendTo(a),a.attr("data-tooltip",i[o].title).addClass("flipbook-has-tooltip"),a.appendTo(e.shareMenu).bind("click",(function(e){e.preventDefault(),e.stopPropagation();var o,a=this.dataset.network,r=encodeURIComponent(i.shareTitle||i[a].description||"Check out this flipbook"),l=encodeURIComponent(i.shareUrl||t.location.href);encodeURIComponent(i.shareImage||"");switch(a){case"facebook":o="https://www.facebook.com/sharer.php?u="+l+"&t="+r;break;case"twitter":o="https://twitter.com/intent/tweet?text="+r+"&url="+l}t.open(o,"Share","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=600, height=600, top="+s+", left="+n)}))}}))}},toggleNotesMenu:function(){},updateNoteSettings:function(e){this.options.noteTypes.forEach((function(t){t.id==e.id&&(t.enabled=e.enabled)})),this.noteService.updateNoteVisibility()},bookmarkPage:function(e){},removeBookmark:function(e){},isBookmarked:function(e){return this.getBookmarkedPages().indexOf(String(e))>0},getBookmarkedPages:function(){var e=localStorage.getItem(this.options.name+"_flipbook_bookmarks");return e?e.split(";"):[]},setBookmarkedPages:function(e){localStorage.setItem(this.options.name+"_flipbook_bookmarks",e.join(";"))},printPage:function(e,t){var i,n=this.options.pages[e],s=this.options.pageTextureSize,a=this;if(n)if(n.print)i=n.print;else if(n.images&&n.images[s]){const e=o.createElement("canvas"),t=e.getContext("2d"),a=n.images[s];e.width=a.width,e.height=a.height,t.drawImage(a,0,0,a.width,a.height),i=e.toDataURL(),e.width=e.height=1,t.clearRect(0,0,1,1)}else n.src&&(i=n.src);if(i)this.togglePrintWindow(i);else{const t=this.options.cover?e:e+1;this.loadPage(t,s,(function(){a.printPage(e)}))}},downloadPage:function(e){},printFile:function(e){var t=o.createElement("iframe");t.style.display="none",t.src=e,o.body.appendChild(t),t.contentWindow.onload=function(){var e=this;setTimeout((function(){e.print()}),100)}},togglePrintWindow:function(e){var o=this,i="";if(e)i=e;else{if(o.options.printPdfUrl)return void o.printFile(o.options.printPdfUrl);if(o.options.pdfUrl)return void o.printFile(o.options.pdfUrl)}!function(){var n=t.open("about:blank","_new");if(n.document.open(),e)i='<img src="'+e+'"/>\n';else for(var s=0;s<o.options.pages.length;s++)o.options.pages[s].src&&(i+='<img src="'+o.options.pages[s].src.toString()+'"/>\n');var a=function(e){return"<html>\n<head>\n<title>Temporary Printing Window</title>\n<script>\nfunction step1() {\n  setTimeout('step2()', 10);\n}\nfunction step2() {\n  window.addEventListener('afterprint', function(){\n       debugger;\n       window.close();\n  });\n  window.print();\n}\n<\/script>\n<style>img {display:block;max-width:100%;page-break-after: always;}@media print header{display: none;}</style>\n</head>\n<body onLoad='step1()'>\n"+e+"</body>\n</html>\n"}(i);n.document.write(a),n.document.close()}()},thumbsVertical:function(){this.thumbsCreated},toggleExpand:function(){var e,t=this.fullscreenElement;(e=t).requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen?function(e){o.fullscreenElement||o.mozFullScreenElement||o.webkitFullscreenElement||o.msFullscreenElement?o.exitFullscreen?o.exitFullscreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.msExitFullscreen&&o.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen()}(t):(t.classList.toggle("flipbook-browser-fullscreen"),o.body.classList.toggle("flipbook-overflow-hidden")),this.toolsMenuShowing&&this.toggleToolsMenu()},expand:function(){},toggleAutoplay:function(e){},initEasing:function(){t.jQuery.extend(t.jQuery.easing,{def:"easeOutQuad",swing:function(e,t,o,i,n){return jQuery.easing[jQuery.easing.def](e,t,o,i,n)},easeInQuad:function(e,t,o,i,n){return i*(t/=n)*t+o},easeOutQuad:function(e,t,o,i,n){return-i*(t/=n)*(t-2)+o},easeInOutQuad:function(e,t,o,i,n){return(t/=n/2)<1?i/2*t*t+o:-i/2*(--t*(t-2)-1)+o},easeInCubic:function(e,t,o,i,n){return i*(t/=n)*t*t+o},easeOutCubic:function(e,t,o,i,n){return i*((t=t/n-1)*t*t+1)+o},easeInOutCubic:function(e,t,o,i,n){return(t/=n/2)<1?i/2*t*t*t+o:i/2*((t-=2)*t*t+2)+o},easeInQuart:function(e,t,o,i,n){return i*(t/=n)*t*t*t+o},easeOutQuart:function(e,t,o,i,n){return-i*((t=t/n-1)*t*t*t-1)+o},easeInOutQuart:function(e,t,o,i,n){return(t/=n/2)<1?i/2*t*t*t*t+o:-i/2*((t-=2)*t*t*t-2)+o},easeInQuint:function(e,t,o,i,n){return i*(t/=n)*t*t*t*t+o},easeOutQuint:function(e,t,o,i,n){return i*((t=t/n-1)*t*t*t*t+1)+o},easeInOutQuint:function(e,t,o,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+o:i/2*((t-=2)*t*t*t*t+2)+o},easeInSine:function(e,t,o,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+o},easeOutSine:function(e,t,o,i,n){return i*Math.sin(t/n*(Math.PI/2))+o},easeInOutSine:function(e,t,o,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+o},easeInExpo:function(e,t,o,i,n){return 0==t?o:i*Math.pow(2,10*(t/n-1))+o},easeOutExpo:function(e,t,o,i,n){return t==n?o+i:i*(1-Math.pow(2,-10*t/n))+o},easeInOutExpo:function(e,t,o,i,n){return 0==t?o:t==n?o+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+o:i/2*(2-Math.pow(2,-10*--t))+o},easeInCirc:function(e,t,o,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+o},easeOutCirc:function(e,t,o,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+o},easeInOutCirc:function(e,t,o,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+o:i/2*(Math.sqrt(1-(t-=2)*t)+1)+o},easeInElastic:function(e,t,o,i,n){var s=1.70158,a=0,r=i;return 0==t?o:1==(t/=n)?o+i:(a||(a=.3*n),r<Math.abs(i)?(r=i,s=a/4):s=a/(2*Math.PI)*Math.asin(i/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/a)+o)},easeOutElastic:function(e,t,o,i,n){var s=1.70158,a=0,r=i;return 0==t?o:1==(t/=n)?o+i:(a||(a=.3*n),r<Math.abs(i)?(r=i,s=a/4):s=a/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin((t*n-s)*(2*Math.PI)/a)+i+o)},easeInOutElastic:function(e,t,o,i,n){var s=1.70158,a=0,r=i;return 0==t?o:2==(t/=n/2)?o+i:(a||(a=n*(.3*1.5)),r<Math.abs(i)?(r=i,s=a/4):s=a/(2*Math.PI)*Math.asin(i/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/a)*-.5+o:r*Math.pow(2,-10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/a)*.5+i+o)},easeInBack:function(e,t,o,n,s,a){return a==i&&(a=1.70158),n*(t/=s)*t*((a+1)*t-a)+o},easeOutBack:function(e,t,o,n,s,a){return a==i&&(a=1.70158),n*((t=t/s-1)*t*((a+1)*t+a)+1)+o},easeInOutBack:function(e,t,o,n,s,a){return a==i&&(a=1.70158),(t/=s/2)<1?n/2*(t*t*((1+(a*=1.525))*t-a))+o:n/2*((t-=2)*t*((1+(a*=1.525))*t+a)+2)+o},easeInBounce:function(e,t,o,i,n){return i-jQuery.easing.easeOutBounce(e,n-t,0,i,n)+o},easeOutBounce:function(e,t,o,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+o:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+o:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+o:i*(7.5625*(t-=2.625/2.75)*t+.984375)+o},easeInOutBounce:function(e,t,o,i,n){return t<n/2?.5*jQuery.easing.easeInBounce(e,2*t,0,i,n)+o:.5*jQuery.easing.easeOutBounce(e,2*t-n,0,i,n)+.5*i+o}})}},FLIPBOOK.Book=function(){},FLIPBOOK.Book.prototype={rightIndex:0,goToPage:function(){},getRightIndex:function(){},canFlipNext:function(){return this.flippedright>0&&(!(1!=this.view||!this.isFocusedLeft||!this.isFocusedLeft())||!(1==this.flippedright&&!this.options.rightToLeft&&!this.options.backCover))},canFlipPrev:function(){return this.flippedleft>0&&(!(1!=this.view||!this.isFocusedRight||!this.isFocusedRight())||!(1==this.flippedleft&&this.options.rightToLeft&&!this.options.backCover))},getCurrentPageNumber:function(){var e=this.rightIndex%2==1?this.rightIndex+1:this.rightIndex;return this.options.rightToLeft?(e=this.options.pages.length-e,this.isFocusedRight()?e:e+1):this.isFocusedLeft()?e:e+1},startPageItems:function(e){e.querySelectorAll(".flipbook-page-item").forEach((function(e){if("VIDEO"==e.nodeName||"AUDIO"==e.nodeName){const t=e.getAttribute("data-url");e.querySelector("source").setAttribute("src",t),e.load(),e.style.visibility="hidden",(e.autoplay||e.controls)&&(e.readyState<4?e.oncanplay=function(){this.currentTime==this.duration&&this.load(),this.autoplay&&this.play(),e.style.visibility="visible"}:(e.currentTime==e.duration&&e.load(),e.autoplay&&e.play(),e.style.visibility="visible"))}}))}},FLIPBOOK.Notes=function(e){const t=this;this.main=e,this.notes=Object.values(e.options.notes||[]),this.textSelectionRect=o.createElement("span"),this.textSelectionRect.className="flipbook-add-note-rect hover";const i=o.createElement("span");i.className="add-note-btn",i.innerText=e.options.strings.addNote,i.onclick=function(){t.hideButton(),t.createNote()},i.onmousedown=function(){},this.noteButton=i,this.textSelectionRect.appendChild(i),this.hideButton(),this.notePopup=o.createElement("div"),this.notePopup.className="flipbook-note-display",this.notePopup.innerHTML='<div class="note-content"><textarea role="textbox" maxlength="500" placeholder="'+e.options.strings.typeInYourNote+'" tabindex="0" class="note-article"></textarea></div> <div  aria-hidden="true" class="note-footer"> <span title="Delete Note" class="icon icon-trash-can note-button note-delete-button"><svg version="1.1" viewBox="0 0 24 24" class="svg-icon svg-fill" focusable="false"><path pid="0" d="M15.976 17.862c0 .607-.414 1.138-.885 1.138H8.893c-.47 0-.869-.513-.869-1.12L8.002 8H16l-.023 9.862zM20 6h-5V4.466C15 3.66 14.853 3 14.013 3h-3.858C9.315 3 9 3.659 9 4.466V6H4v2h2v10c0 1.843 1.153 3 2.893 3h6.198C16.84 21 18 19.852 18 18V8h2V6z"></path><path pid="1" d="M13 18h1V9h-1zM10 18h1V9h-1z"></path></svg></span></div>',this.notePopup.onmouseup=function(e){e.stopPropagation()},this.noteDelete=this.notePopup.getElementsByClassName("note-delete-button")[0],this.noteDelete.onclick=function(){t.deleteNote()},this.noteInput=this.notePopup.querySelectorAll("textarea")[0],this.noteInput.onchange=function(){const e=this.dataset.note,o=this.value;t.getNoteById(e).text=o,t.main.trigger("r3d-update-note",{note:t.getNoteById(e)})},this.updateNoteVisibility()},FLIPBOOK.Notes.prototype={initPageNotes:function(e){const t=this;this.notes.forEach((function(o){o.page==e.index+1&&t.addPageNote(o,e)})),this.addPageNoteListeners(e)},getNodeColor:function(e){let t="green";return this.main.options.noteTypes.forEach((function(o){o.id==e.type&&(t=o.color)})),t},updateNoteVisibility:function(){let e=o.documentElement;this.main.options.noteTypes.forEach((function(t){e.style.setProperty(`--note-${t.id}-opacity`,t.enabled?"1":"0"),e.style.setProperty(`--note-${t.id}-pointer-events`,t.enabled?"auto":"none")}))},addPageNote:function(e){const t=e.page,o=this.main.options.pages[t-1],i=this.getNodeColor(e)||"yellow";if(e.selectedText&&o.htmlContentInitialized){e.id||(e.id=Date.now()+Math.floor(1e3*Math.random()));const n=jQuery(o.htmlContent).find(".textLayer"),s=`flipbook-page-note \n                                                     note-id-${e.id} \n                                                     note-page-${t} \n                                                     note-type-${e.type} \n                                                     mark-${i} \n                                                     flipbook-note-${e.id}`;n.mark(e.selectedText,{acrossElements:!0,separateWordSearch:!1,className:"mark-note "+s});const a=this;n.find(`.note-id-${e.id}`).each((function(t,i){i.dataset.note=e.id,i.onclick=function(){a.showNote(this,o,this.dataset.note),a.hideButton()},i.style.opacity="var(--note-"+e.type+"-opacity)",i.style.pointerEvents="var(--note-"+e.type+"-pointer-events)"}))}},showButton:function(){this.noteButton.style.display="block"},hideButton:function(){this.noteButton.style.display="none"},showNote(e,t,o){const i=t.htmlContent.getBoundingClientRect(),n=e.getBoundingClientRect(),s=this.getNoteById(o);jQuery(t.htmlContent)[0].appendChild(this.notePopup);const a=this.main,r=a.Book.sc*a.wrapperH/1e3,l=(n.y/a.zoom-i.y/a.zoom)/r;this.notePopup.style.top=l<150?l+40+"px":l-140+"px",this.notePopup.style.left=(n.x/a.zoom+.5*n.width/a.zoom-i.x/a.zoom)/r+"px",this.noteInput.value=s.text||"",this.noteInput.dataset.note=s.id,this.activeNote=s,s.readonly?this.disableNoteEdit():this.enableNoteEdit()},enableNoteEdit:function(){this.noteDelete.style.display="block",this.noteInput.readOnly=!1},disableNoteEdit:function(){this.noteDelete.style.display="none",this.noteInput.readOnly=!0},hideNote:function(){this.notePopup.parentNode&&this.notePopup.parentNode.removeChild(this.notePopup),this.activeNote=null},createNote:function(){this.textSelectionRect.appendChild(this.notePopup),this.notePopup.style.left="50%",this.textSelectionRect.offsetTop<150?this.notePopup.style.top="40px":this.notePopup.style.top="-140px",this.noteInput.value="",this.noteInput.focus();const e={selectedText:this.selectedTextString,page:this.selectedTextPageNumber,type:1};this.notes.push(e),this.addPageNote(e),this.noteInput.dataset.note=e.id,this.addPageNoteListeners(this.main.options.pages[e.page-1]),this.activeNote=e,this.enableNoteEdit(),this.main.trigger("r3d-update-note",{note:e})},deleteNote:function(){const e=this.main.options.pages[this.activeNote.page-1];jQuery(e.htmlContent).find(".textLayer").unmark({className:`flipbook-note-${this.activeNote.id}`});const t=this.notes.indexOf(this.activeNote);t>-1&&this.notes.splice(t,1),this.hideNote(),this.main.trigger("r3d-delete-note",{note:this.activeNote})},getNoteById:function(e){let t=null;return this.notes.forEach((function(o){Number(o.id)==Number(e)&&(t=o)})),t},removeTextRect:function(){this.textSelectionRect.parentNode&&this.textSelectionRect.parentNode.removeChild(this.textSelectionRect)},addPageNoteListeners:function(e){const o=this;e.textLayerDiv&&!e.notesInitialized&&(e.textLayerDiv.addEventListener("mouseup",(function(e){if(!e.target.classList.contains("add-note-btn"))if(o.hideNote(),o.showButton(),o.selectedText=t.getSelection(),o.selectedText.toString()){o.selectedTextString=o.selectedText.toString(),o.selectedTextPageNumber=Number(this.dataset.pageNumber),o.selectedTextRange=o.selectedText.getRangeAt(0);const e=o.selectedTextRange.getBoundingClientRect(),t=this.getBoundingClientRect(),i=o.main;let n=i.Book.sc*i.wrapperH/1e3;o.textSelectionRect.style.top=(e.y/i.zoom-t.y/i.zoom)/n+"px",o.textSelectionRect.style.left=(e.x/i.zoom-t.x/i.zoom)/n+"px",o.textSelectionRect.style.width=e.width/i.zoom/n+"px",o.textSelectionRect.style.height=e.height/i.zoom/n+"px",this.appendChild(o.textSelectionRect)}else o.removeTextRect()})),e.textLayerDiv.addEventListener("mousemove",(function(e){if(o.selectedTextRange&&o.selectedText.toString()){const t=o.textSelectionRect.getBoundingClientRect(),i=o.textSelectionRect.firstChild.getBoundingClientRect();e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=i.top&&e.clientY<=t.bottom?o.showButton():o.hideButton()}})),e.notesInitialized=!0)}},FLIPBOOK.Tooltip=function(){this.domElement=o.createElement("div"),this.domElement.style.display="none",this.domElement.className="flipbook-tooltip flipbook-noselect";const e=this;this.currentPosition={x:0,y:0},o.addEventListener("scroll",(function(){e.position()}))},FLIPBOOK.Tooltip.prototype={show:function(e){this.showing||(this.domElement.style.display="block",this.showing=!0,e.text&&(this.domElement.innerText=e.text),e.parent&&e.parent.appendChild(this.domElement),e.onClick?(this.domElement.style.cursor="pointer",this.domElement.onclick=e.onClick):(this.domElement.style.cursor="auto",this.domElement.removeAttribute("onclick")),this.currentPosition=e.position,this.position())},hide:function(){this.showing&&(this.domElement.style.display="none",this.showing=!1)},position:function(){const e=this.domElement.parentNode.getBoundingClientRect();this.domElement.style.top=this.currentPosition.y-e.top-scrollY+"px",this.domElement.style.left=this.currentPosition.x-e.left-scrollX+"px"}},FLIPBOOK.Thumbnails=function(e){var t=this,i=e.options,n=e.wrapper;this.main=e,this.options=i,this.wrapper=n,this.active=null,this.thumbHolder=jQuery(o.createElement("div")).addClass("flipbook-thumbHolder flipbook-side-menu skin-color-bg").appendTo(n).css(this.options.sideMenuPosition,"0").hide(),e.createMenuHeader(this.thumbHolder,e.strings.thumbnails,e.toggleThumbs),this.bookmark=jQuery("<div>").addClass("flipbook-font").appendTo(this.thumbHolder).hide(),jQuery('<a><div class="c-p skin-color flipbook-btn">'+i.strings.bookmarkCurrentPage+"</div></a>").appendTo(this.bookmark).bind("click",(function(t){e.bookmarkPage(e.cPage[0],this),t.preventDefault(),t.stopPropagation()})),jQuery('<a><div class="c-l-p skin-color flipbook-btn">'+i.strings.bookmarkLeftPage+"</div></a>").appendTo(this.bookmark).bind("click",(function(t){e.bookmarkPage(e.cPage[0],this),t.preventDefault(),t.stopPropagation()})),jQuery('<a><div class="c-r-p skin-color flipbook-btn">'+i.strings.bookmarkRightPage+"</div></a>").appendTo(this.bookmark).bind("click",(function(t){e.bookmarkPage(e.cPage[1],this),t.preventDefault(),t.stopPropagation()})),this.search=jQuery("<div>").addClass("flipbook-search").appendTo(this.thumbHolder).hide(),this.$searchBar=jQuery('<div class="flipbook-findbar" id="findbar" deluminate_imagetype="png"><div id="findbarInputContainer"><input id="findInput" class="toolbarField" title="Find" autocapitalize="none" placeholder="'+i.strings.findInDocument+'..."></div><div class="flipbook-find-info skin-color"/></div>').appendTo(this.search),this.thumbsWrapper=jQuery(o.createElement("div")).appendTo(this.thumbHolder).addClass("flipbook-thumbsWrapper"),this.closeGrid=jQuery(o.createElement("div")).appendTo(this.thumbsWrapper).addClass("flipbook-thumbs-grid-close").bind("click",(function(e){e.stopPropagation(),e.preventDefault(),t.main.closeMenus()})),this.main.createSVGIcon("close",null,!0).appendTo(this.closeGrid),this.thumbsScroller=jQuery(o.createElement("div")).appendTo(this.thumbsWrapper).addClass("flipbook-thumbsScroller skin-color");var s=0;this.$findInput=this.$searchBar.find("#findInput").on("keyup",(function(){var e=this.value;clearTimeout(s),s=setTimeout((function(e){if(""!=e){var o=t.main,i=o.pdfService,n=o.options,s=0;if(t.hideAllThumbs(),t.clearSearchResults(),t.pagesFound=0,t.$findInfo.hide(),o.unmark(),o.searchingString=e,t.$findInfo.show().text(n.strings.noMatches),i)for(var a=0;a<i.pdfInfo.numPages;a++)i.findInPage(e,a,(function(o,i,a,r){o.length>0&&(t.pagesFound++,s+=o.length,t.$findInfo.show().text(s+" "+n.strings.matchesFound),t.main.mark(e),t.showSearchResults(o,a,r))}));else n.pagesOriginal.forEach(((i,s)=>{n.cover||s++;var a=s;n.doublePage&&(a*=2),n.doublePage&&a==2*n.pagesOriginal.length-2&&a--,o.loadPageHTML(a,(function(i,s){i.innerText.toUpperCase().search(o.searchingString.toUpperCase())>-1&&(n.doublePage&&(s/=2),t.showThumb(s),t.pagesFound++,t.$findInfo.show().text(t.pagesFound+" "+n.strings.pagesFoundContaining+' "'+e+'"'),t.main.mark(e)),0==t.pagesFound&&t.$findInfo.show().text(n.strings.noMatches)}))}))}else t.hideAllThumbs(),t.clearSearchResults(),t.$findInfo.hide(),t.main.unmark(),t.main.searchingString=e}),700,e)})),this.$findInfo=this.$searchBar.find(".flipbook-find-info"),this.thumbs=[];var a=i.pages,r=[];if(i.doublePage)for(var l=0;l<a.length;l++)0!=l&&l%2==0||r.push(a[l]);else r=a;i.pdfMode&&this.loadThumbsFromPdf(r);var h=i.thumbSize,p=i.thumbSize*i.pageWidth/i.pageHeight;r.forEach(((n,s)=>{var a=n.thumb;if(!n.empty){var l,d=jQuery("<div>").addClass("flipbook-thumb").appendTo(t.thumbsScroller).attr("data-thumb-index",s).width(p).height(h),c=jQuery("<span>").appendTo(d).addClass("thumb-btn-close").bind("click",(function(t){t.stopPropagation(),t.preventDefault(),e.removeBookmark(jQuery(this).parent().attr("data-thumb-index"))}));if(e.createSVGIcon("close",null,!0).appendTo(c),this.thumbs.push(d),n.thumbCanvas)l=jQuery(n.thumbCanvas);else{if(!a)return;l=jQuery("<img/>").attr("src",a)}l.appendTo(d);var g=i.doublePage&&i.pages.length%2==0&&s==r.length-1,u=i.doublePage&&0==s,b=i.doublePage&&!u&&!g;if(g)l.height(h).width(p).attr("page-title",2*s),jQuery(o.createElement("span")).text(String(2*s)).appendTo(d).addClass("skin-color").addClass("flipbook-thumb-num");else if(b)d.width(2*p),l.height(h).width(2*p).attr("page-title",2*s+1),jQuery(o.createElement("span")).text(String(2*s)+"-"+String(2*s+1)).appendTo(d).addClass("skin-color").addClass("flipbook-thumb-num");else{l.height(h).width(p).attr("page-title",s+1);var m=String(s+1);this.options.pages[s]&&this.options.pages[s].name&&(m=this.options.pages[s].name),jQuery(o.createElement("span")).text(m).appendTo(d).addClass("skin-color").addClass("flipbook-thumb-num")}"overlay"==i.thumbsStyle&&(i.thumbsCloseOnClick=!0),l.bind("click",(function(o){o.stopPropagation(),o.preventDefault();var n=Number(jQuery(this).attr("page-title"));i.rightToLeft&&(n=i.pages.length-n+1),e.goToPage(n),"search"!=t.active&&i.thumbsCloseOnClick&&e.toggleThumbs(!1)}))}})),e.initColors()},FLIPBOOK.Thumbnails.prototype={loadThumbsFromPdf:function(e){for(var t=this.main.pdfService.pdfDocument._pdfInfo.numPages,i=0;i<t;i++){var n=o.createElement("canvas");e[i].thumbCanvas=n}this.loadThumbFromPdf(0,e)},loadVisibleThumbs:function(){},loadThumbFromPdf:function(e,t){var o=this;this.main.pdfService.pdfDocument.getPage(e+1).then((function(e){var i=e.getViewport({scale:1}),n=o.options.thumbSize/i.height,s=e.getViewport({scale:n}),a=t[e._pageIndex].thumbCanvas,r=a.getContext("2d");a.height=s.height,a.width=s.width;var l={canvasContext:r,viewport:s};e.cleanupAfterRender=!0,e.render(l).promise.then((function(){e.cleanup(),e._pageIndex+1<o.main.pdfService.pdfDocument._pdfInfo.numPages&&o.loadThumbFromPdf(e._pageIndex+1,t)}))}))},showAllThumbs:function(){jQuery(".flipbook-thumb").show(),this.clearSearchResults()},hideAllThumbs:function(){jQuery(".flipbook-thumb").hide()},clearSearchResults:function(){jQuery(".flipbook-search-match").remove()},showSearchResults:function(e,t,o){var i=this,n=this.main.options,s=e.length,a=Number(t+1);jQuery('<div data-page="'+a+'" style="order: '+t+'" class="flipbook-search-match"><div class="flipbook-search-match-title"><span style="float:left;"><strong>Page '+a+'</strong></span><span style="float:right;">'+s+' matches</span></div><div class="flipbook-search-match-text">'+o+"</div></div>").appendTo(i.thumbsScroller).bind("click",(function(e){e.stopPropagation(),e.preventDefault();var t=Number(this.dataset.page);t=n.rightToLeft&&n.pages&&n.pages.length?n.pages.length-t+1:t,i.main.goToPage(t)}))},showThumb:function(e){this.thumbs[e]&&this.thumbs[e].show()},hideThumb:function(e){this.thumbs[e].hide()},showBookmarks:function(){jQuery(".thumb-btn-close").show(),this.showBookmarkedThumbs(),this.clearSearchResults(),this.bookmark.show(),this.setTitle(this.options.strings.bookmarks),this.main.updateCurrentPage(),this.active="bookmarks",this.thumbHolder.removeClass("flipbook-thumbs-grid")},showSearch:function(){this.clearSearchResults(),this.hideAllThumbs(),this.search.show(),this.$findInfo.hide(),jQuery(".thumb-btn-close").hide(),this.setTitle(this.options.strings.search),this.$findInput.val("").focus(),this.active="search",this.thumbHolder.removeClass("flipbook-thumbs-grid")},showBookmarkedThumbs:function(){var e=this.main.getBookmarkedPages();this.hideAllThumbs();for(var t=0;t<e.length;t++){var o=e[t];o&&this.showThumb(o)}},show:function(){this.setTitle(this.options.strings.thumbnails),this.bookmark.hide(),this.search.hide(),this.thumbHolder.show(),this.main.thumbsVertical(),this.showAllThumbs(),jQuery(".thumb-btn-close").hide(),this.loadVisibleThumbs(),this.main.resize(),this.active="thumbs","overlay"==this.main.options.thumbsStyle&&this.thumbHolder.addClass("flipbook-thumbs-grid")},hide:function(){this.thumbHolder.hide(),this.main.resize(),this.active=null},setTitle:function(e){this.thumbHolder.find(".flipbook-menu-title").text(e)}},FLIPBOOK.Lightbox=function(e,t,i){var n=this;this.context=e,this.options=i,this.$document=jQuery("document"),this.$body=jQuery("body"),this.$html=jQuery("html"),this.$window=jQuery("window"),n.overlay=jQuery(o.createElement("div")).attr("style",i.lightboxCSS).addClass("flipbook-overlay").css("display","none").css("top",n.options.lightboxMarginV).css("bottom",n.options.lightboxMarginV).css("left",n.options.lightboxMarginH).css("right",n.options.lightboxMarginH).appendTo("body"),n.options.lightboxCloseOnClick&&jQuery("body").bind("click",(function(e){var t=jQuery(e.target);(!t.parents().hasClass("flipbook-overlay")||t.hasClass("flipbook-bookLayer")||t.hasClass("flipbook-carousel-slide"))&&n.closeLightbox()})),i.lightboxBackground&&n.overlay.css("background",i.lightboxBackground),i.lightboxBackgroundColor&&n.overlay.css("background",i.lightboxBackgroundColor),i.lightboxBackgroundPattern&&n.overlay.css("background","url("+i.lightboxBackgroundPattern+") repeat"),i.lightboxBackgroundImage&&(n.overlay.css("background","url("+i.lightboxBackgroundImage+") no-repeat"),n.overlay.css("background-size","cover"),n.overlay.css("background-position","center center")),o.addEventListener("keydown",(function(e){"Escape"===e.key&&n.closeLightbox()})),n.wrapper=jQuery(o.createElement("div")).css("height","auto").appendTo(n.overlay),n.wrapper.attr("class","flipbook-wrapper-transparent").css("margin","0px auto").css("padding","0px").css("height","100%").css("width","100%"),t.appendTo(n.wrapper),jQuery("<div/>").appendTo(n.wrapper).addClass("flipbook-lightbox-toolbar")},FLIPBOOK.Lightbox.prototype={openLightbox:function(){FLIPBOOK.lightboxOpened||(FLIPBOOK.lightboxOpened=!0,this.overlay.css("display","none"),this.overlay.fadeIn("slow"),this.$body.addClass("flipbook-overflow-hidden"),this.$html.addClass("flipbook-overflow-hidden"),this.$window.trigger("r3d-lightboxopen"),this.options.deeplinkingEnabled||t.history.pushState(null,"",t.location.href),this.context.options.password&&!this.context.pdfinitStarted&&this.context.initialized&&this.context.initPdf())},closeLightbox:function(e){FLIPBOOK.lightboxOpened&&this.context.Book&&this.context.Book.enabled&&(FLIPBOOK.lightboxOpened=!1,this.overlay.fadeOut("fast"),this.$body.removeClass("flipbook-overflow-hidden"),this.$html.removeClass("flipbook-overflow-hidden"),this.$window.trigger("r3d-lightboxclose"),this.context.trigger("lightboxclose"),jQuery(this.context.fullscreenElement).removeClass("flipbook-browser-fullscreen"),this.context.lightboxEnd(),e||this.options.deeplinkingEnabled||history.back())},disposeLightbox:function(){FLIPBOOK.lightboxOpened=!1,this.overlay.fadeOut("fast"),this.$body.removeClass("flipbook-overflow-hidden"),this.$html.removeClass("flipbook-overflow-hidden"),this.$window.trigger("r3d-lightboxclose"),this.context.trigger("lightboxclose"),jQuery(this.context.fullscreenElement).removeClass("flipbook-browser-fullscreen"),this.context.lightboxEnd(),this.context.disposed=!0}}}(jQuery,window,document),FLIPBOOK.onPageLinkClick=function(e){var t=e.dataset.bookid,o=e.dataset.page;o&&FLIPBOOK.books[t].goToPage(Number(o));var i=e.dataset.url;i&&window.open(i,"_blank")},FLIPBOOK.easings={easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2}},FLIPBOOK.animate=function({from:e,to:t,delay:o,duration:i,easing:n="easeOutQuad",step:s,complete:a}){const r=performance.now();function l(o){const h=o-r,p=Math.min(h/i,1),d=e+(t-e)*FLIPBOOK.easings[n](p);s(d),p<1?requestAnimationFrame(l):a()}o?setTimeout((()=>{requestAnimationFrame(l)}),o):requestAnimationFrame(l)};